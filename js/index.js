/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{checkBounds:()=>Ko,en2LonLat:()=>Zo,gridRef2en:()=>qo,validateGridRef:()=>Yo});var n={};t.r(n),t.d(n,{checkBounds:()=>Xo,en2LonLat:()=>ea,gridRef2en:()=>na,validateGridRef:()=>ta});const r=preact;var o=t.n(r),a=0;function i(t,e,n,o,i){var l,c,s={};for(c in e)"ref"==c?l=e[c]:s[c]=e[c];var u={type:t,props:s,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--a,__source:o,__self:i};if("function"==typeof t&&(l=t.defaultProps))for(c in l)void 0===s[c]&&(s[c]=l[c]);return r.options.vnode&&r.options.vnode(u),u}const l=preactHooks;function c(t,e){for(var n in e)t[n]=e[n];return t}function s(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}function u(t){this.props=t}(u.prototype=new r.Component).isPureReactComponent=!0,u.prototype.shouldComponentUpdate=function(t,e){return s(this.props,t)||s(this.state,e)};var f=r.options.__b;r.options.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),f&&f(t)};var d="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function p(t){function e(e,n){var r=c({},e);return delete r.ref,t(r,(n=e.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return e.$$typeof=d,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var h=function(t,e){return null==t?null:(0,r.toChildArray)((0,r.toChildArray)(t).map(e))},v=h,m=(r.toChildArray,r.options.__e);r.options.__e=function(t,e,n){if(t.then)for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e);m(t,e,n)};var g=r.options.unmount;function y(){this.__u=0,this.t=null,this.__b=null}function b(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function w(){this.u=null,this.o=null}r.options.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&!0===t.__h&&(t.type=null),g&&g(t)},(y.prototype=new r.Component).__c=function(t,e){var n=e.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=b(r.__v),a=!1,i=function(){a||(a=!0,n.__R=null,o?o(l):l())};n.__R=i;var l=function(){if(!--r.__u){if(r.state.__e){var t=r.state.__e;r.__v.__k[0]=function t(e,n,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)})),e.__c&&e.__c.__P===n&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}(t,t.__c.__P,t.__c.__O)}var e;for(r.setState({__e:r.__b=null});e=r.t.pop();)e.forceUpdate()}},c=!0===e.__h;r.__u++||c||r.setState({__e:r.__b=r.__v.__k[0]}),t.then(i,i)},y.prototype.componentWillUnmount=function(){this.t=[]},y.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=function t(e,n,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),e.__c.__H=null),null!=(e=c({},e)).__c&&(e.__c.__P===r&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)}))),e}(this.__b,n,o.__O=o.__P)}this.__b=null}var a=e.__e&&(0,r.createElement)(r.Fragment,null,t.fallback);return a&&(a.__h=null),[(0,r.createElement)(r.Fragment,null,e.__e?null:t.children),a]};var O=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};(w.prototype=new r.Component).__e=function(t){var e=this,n=b(e.__v),r=e.o.get(t);return r[0]++,function(o){var a=function(){e.props.revealOrder?(r.push(o),O(e,t,r)):o()};n?n(a):a()}},w.prototype.render=function(t){this.u=null,this.o=new Map;var e=(0,r.toChildArray)(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},w.prototype.componentDidUpdate=w.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,n){O(t,n,e)}))};var x="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,S=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,C="undefined"!=typeof document,N=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t)};r.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(r.Component.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var j=r.options.event;function P(){}function k(){return this.cancelBubble}function E(){return this.defaultPrevented}r.options.event=function(t){return j&&(t=j(t)),t.persist=P,t.isPropagationStopped=k,t.isDefaultPrevented=E,t.nativeEvent=t};var M={configurable:!0,get:function(){return this.class}},A=r.options.vnode;r.options.vnode=function(t){var e=t.type,n=t.props,o=n;if("string"==typeof e){var a=-1===e.indexOf("-");for(var i in o={},n){var l=n[i];C&&"children"===i&&"noscript"===e||"value"===i&&"defaultValue"in n&&null==l||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===l?l="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!N(n.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():a&&S.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===l&&(l=void 0),o[i]=l)}"select"==e&&o.multiple&&Array.isArray(o.value)&&(o.value=(0,r.toChildArray)(n.children).forEach((function(t){t.props.selected=-1!=o.value.indexOf(t.props.value)}))),"select"==e&&null!=o.defaultValue&&(o.value=(0,r.toChildArray)(n.children).forEach((function(t){t.props.selected=o.multiple?-1!=o.defaultValue.indexOf(t.props.value):o.defaultValue==t.props.value}))),t.props=o}e&&n.class!=n.className&&(M.enumerable="className"in n,null!=n.className&&(o.class=n.className),Object.defineProperty(o,"className",M)),t.$$typeof=x,A&&A(t)};var F,T=r.options.__r;function L(t){return!!t&&t.$$typeof===x}function I(){return I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I.apply(this,arguments)}r.options.__r=function(t){T&&T(t),t.__c},r.Fragment,l.useState,l.useReducer,l.useEffect,l.useLayoutEffect,l.useRef,l.useImperativeHandle,l.useMemo,l.useCallback,l.useContext,l.useDebugValue,r.createElement,r.createContext,r.createRef,r.Fragment,r.Component,r.Fragment,function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(F||(F={}));var R="beforeunload";function D(t){t.preventDefault(),t.returnValue=""}function V(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}}}function G(t){var e=t.pathname,n=void 0===e?"/":e,r=t.search,o=void 0===r?"":r,a=t.hash,i=void 0===a?"":a;return o&&"?"!==o&&(n+="?"===o.charAt(0)?o:"?"+o),i&&"#"!==i&&(n+="#"===i.charAt(0)?i:"#"+i),n}function B(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function U(t,e){if(!t)throw new Error(e)}const H=(0,r.createContext)(null),W=(0,r.createContext)(null),z=(0,r.createContext)({outlet:null,matches:[]});function K(t){let{to:e,replace:n,state:r}=t;J()||U(!1);let o=Q();return(0,l.useEffect)((()=>{o(e,{replace:n,state:r})})),null}function $(t){return function(t){let e=(0,l.useContext)(z).outlet;return e?(0,r.createElement)(tt.Provider,{value:t},e):e}(t.context)}function Y(t){U(!1)}function Z(t){let{basename:e="/",children:n=null,location:o,navigationType:a=F.Pop,navigator:i,static:c=!1}=t;J()&&U(!1);let s=pt(e),u=(0,l.useMemo)((()=>({basename:s,navigator:i,static:c})),[s,i,c]);"string"==typeof o&&(o=B(o));let{pathname:f="/",search:d="",hash:p="",state:h=null,key:v="default"}=o,m=(0,l.useMemo)((()=>{let t=ft(f,s);return null==t?null:{pathname:t,search:d,hash:p,state:h,key:v}}),[s,f,d,p,h,v]);return null==m?null:(0,r.createElement)(H.Provider,{value:u},(0,r.createElement)(W.Provider,{children:n,value:{location:m,navigationType:a}}))}function q(t){let{children:e,location:n}=t;return function(t,e){J()||U(!1);let{matches:n}=(0,l.useContext)(z),o=n[n.length-1],a=o?o.params:{},i=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let c,s=X();if(e){var u;let t="string"==typeof e?B(e):e;"/"===i||(null==(u=t.pathname)?void 0:u.startsWith(i))||U(!1),c=t}else c=s;let f=c.pathname||"/",d=function(t,e,n){void 0===n&&(n="/");let r=ft(("string"==typeof e?B(e):e).pathname||"/",n);if(null==r)return null;let o=ot(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){return t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]))?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(o);let a=null;for(let t=0;null==a&&t<o.length;++t)a=ct(o[t],r);return a}(t,{pathname:"/"===i?f:f.slice(i.length)||"/"});return function(t,e){return void 0===e&&(e=[]),null==t?null:t.reduceRight(((n,o,a)=>(0,r.createElement)(z.Provider,{children:void 0!==o.route.element?o.route.element:n,value:{outlet:n,matches:e.concat(t.slice(0,a+1))}})),null)}(d&&d.map((t=>Object.assign({},t,{params:Object.assign({},a,t.params),pathname:dt([i,t.pathname]),pathnameBase:"/"===t.pathnameBase?i:dt([i,t.pathnameBase])}))),n)}(rt(e),n)}function J(){return null!=(0,l.useContext)(W)}function X(){return J()||U(!1),(0,l.useContext)(W).location}function Q(){J()||U(!1);let{basename:t,navigator:e}=(0,l.useContext)(H),{matches:n}=(0,l.useContext)(z),{pathname:r}=X(),o=JSON.stringify(n.map((t=>t.pathnameBase))),a=(0,l.useRef)(!1);return(0,l.useEffect)((()=>{a.current=!0})),(0,l.useCallback)((function(n,i){if(void 0===i&&(i={}),!a.current)return;if("number"==typeof n)return void e.go(n);let l=ut(n,JSON.parse(o),r);"/"!==t&&(l.pathname=dt([t,l.pathname])),(i.replace?e.replace:e.push)(l,i.state)}),[t,e,o,r])}const tt=(0,r.createContext)(null);function et(){let{matches:t}=(0,l.useContext)(z),e=t[t.length-1];return e?e.params:{}}function nt(t){let{matches:e}=(0,l.useContext)(z),{pathname:n}=X(),r=JSON.stringify(e.map((t=>t.pathnameBase)));return(0,l.useMemo)((()=>ut(t,JSON.parse(r),n)),[t,r,n])}function rt(t){let e=[];return v(t,(t=>{if(!L(t))return;if(t.type===r.Fragment)return void e.push.apply(e,rt(t.props.children));t.type!==Y&&U(!1);let n={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(n.children=rt(t.props.children)),e.push(n)})),e}function ot(t,e,n,r){return void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=""),t.forEach(((t,o)=>{let a={relativePath:t.path||"",caseSensitive:!0===t.caseSensitive,childrenIndex:o,route:t};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||U(!1),a.relativePath=a.relativePath.slice(r.length));let i=dt([r,a.relativePath]),l=n.concat(a);t.children&&t.children.length>0&&(!0===t.index&&U(!1),ot(t.children,e,l,i)),(null!=t.path||t.index)&&e.push({path:i,score:lt(i,t.index),routesMeta:l})})),e}const at=/^:\w+$/,it=t=>"*"===t;function lt(t,e){let n=t.split("/"),r=n.length;return n.some(it)&&(r+=-2),e&&(r+=2),n.filter((t=>!it(t))).reduce(((t,e)=>t+(at.test(e)?3:""===e?1:10)),r)}function ct(t,e){let{routesMeta:n}=t,r={},o="/",a=[];for(let t=0;t<n.length;++t){let i=n[t],l=t===n.length-1,c="/"===o?e:e.slice(o.length)||"/",s=st({path:i.relativePath,caseSensitive:i.caseSensitive,end:l},c);if(!s)return null;Object.assign(r,s.params);let u=i.route;a.push({params:r,pathname:dt([o,s.pathname]),pathnameBase:pt(dt([o,s.pathnameBase])),route:u}),"/"!==s.pathnameBase&&(o=dt([o,s.pathnameBase]))}return a}function st(t,e){"string"==typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((t,e)=>(r.push(e),"([^\\/]+)")));return t.endsWith("*")?(r.push("*"),o+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):o+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(o,e?void 0:"i"),r]}(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:r.reduce(((t,e,n)=>{if("*"===e){let t=l[n]||"";i=a.slice(0,a.length-t.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(e){return t}}(l[n]||""),t}),{}),pathname:a,pathnameBase:i,pattern:t}}function ut(t,e,n){let r,o="string"==typeof t?B(t):t,a=""===t||""===o.pathname?"/":o.pathname;if(null==a)r=n;else{let t=e.length-1;if(a.startsWith("..")){let e=a.split("/");for(;".."===e[0];)e.shift(),t-=1;o.pathname=e.join("/")}r=t>=0?e[t]:"/"}let i=function(t,e){void 0===e&&(e="/");let{pathname:n,search:r="",hash:o=""}="string"==typeof t?B(t):t,a=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:a,search:ht(r),hash:vt(o)}}(o,r);return a&&"/"!==a&&a.endsWith("/")&&!i.pathname.endsWith("/")&&(i.pathname+="/"),i}function ft(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=t.charAt(e.length);return n&&"/"!==n?null:t.slice(e.length)||"/"}const dt=t=>t.join("/").replace(/\/\/+/g,"/"),pt=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ht=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",vt=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";function mt(){return mt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mt.apply(this,arguments)}function gt(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}const yt=["onClick","reloadDocument","replace","state","target","to"],bt=["aria-current","caseSensitive","className","end","style","to","children"];function _t(t){let{basename:e,children:n,window:o}=t,a=(0,l.useRef)();null==a.current&&(a.current=function(t){void 0===t&&(t={});var e=t.window,n=void 0===e?document.defaultView:e,r=n.history;function o(){var t=B(n.location.hash.substr(1)),e=t.pathname,o=void 0===e?"/":e,a=t.search,i=void 0===a?"":a,l=t.hash,c=void 0===l?"":l,s=r.state||{};return[s.idx,{pathname:o,search:i,hash:c,state:s.usr||null,key:s.key||"default"}]}var a=null;function i(){if(a)d.call(a),a=null;else{var t=F.Pop,e=o(),n=e[0],r=e[1];if(d.length){if(null!=n){var i=s-n;i&&(a={action:t,location:r,retry:function(){y(-1*i)}},y(i))}}else g(t)}}n.addEventListener("popstate",i),n.addEventListener("hashchange",(function(){G(o()[1])!==G(u)&&i()}));var l=F.Pop,c=o(),s=c[0],u=c[1],f=V(),d=V();function p(t){return function(){var t=document.querySelector("base"),e="";if(t&&t.getAttribute("href")){var r=n.location.href,o=r.indexOf("#");e=-1===o?r:r.slice(0,o)}return e}()+"#"+("string"==typeof t?t:G(t))}function h(t,e){return void 0===e&&(e=null),I({pathname:u.pathname,hash:"",search:""},"string"==typeof t?B(t):t,{state:e,key:Math.random().toString(36).substr(2,8)})}function v(t,e){return[{usr:t.state,key:t.key,idx:e},p(t)]}function m(t,e,n){return!d.length||(d.call({action:t,location:e,retry:n}),!1)}function g(t){l=t;var e=o();s=e[0],u=e[1],f.call({action:l,location:u})}function y(t){r.go(t)}return null==s&&(s=0,r.replaceState(I({},r.state,{idx:s}),"")),{get action(){return l},get location(){return u},createHref:p,push:function t(e,o){var a=F.Push,i=h(e,o);if(m(a,i,(function(){t(e,o)}))){var l=v(i,s+1),c=l[0],u=l[1];try{r.pushState(c,"",u)}catch(t){n.location.assign(u)}g(a)}},replace:function t(e,n){var o=F.Replace,a=h(e,n);if(m(o,a,(function(){t(e,n)}))){var i=v(a,s),l=i[0],c=i[1];r.replaceState(l,"",c),g(o)}},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(t){return f.push(t)},block:function(t){var e=d.push(t);return 1===d.length&&n.addEventListener(R,D),function(){e(),d.length||n.removeEventListener(R,D)}}}}({window:o}));let i=a.current,[c,s]=(0,l.useState)({action:i.action,location:i.location});return(0,l.useLayoutEffect)((()=>i.listen(s)),[i]),(0,r.createElement)(Z,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:i})}const wt=p((function(t,e){let{onClick:n,reloadDocument:o,replace:a=!1,state:i,target:c,to:s}=t,u=gt(t,yt),f=function(t){J()||U(!1);let{basename:e,navigator:n}=(0,l.useContext)(H),{hash:r,pathname:o,search:a}=nt(t),i=o;if("/"!==e){let n=function(t){return""===t||""===t.pathname?"/":"string"==typeof t?B(t).pathname:t.pathname}(t),r=null!=n&&n.endsWith("/");i="/"===o?e+(r?"/":""):dt([e,o])}return n.createHref({pathname:i,search:a,hash:r})}(s),d=function(t,e){let{target:n,replace:r,state:o}=void 0===e?{}:e,a=Q(),i=X(),c=nt(t);return(0,l.useCallback)((e=>{if(!(0!==e.button||n&&"_self"!==n||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(e))){e.preventDefault();let n=!!r||G(i)===G(c);a(t,{replace:n,state:o})}}),[i,a,c,r,o,n,t])}(s,{replace:a,state:i,target:c});return(0,r.createElement)("a",mt({},u,{href:f,onClick:function(t){n&&n(t),t.defaultPrevented||o||d(t)},ref:e,target:c}))})),Ot=p((function(t,e){let{"aria-current":n="page",caseSensitive:o=!1,className:a="",end:i=!1,style:l,to:c,children:s}=t,u=gt(t,bt),f=X(),d=nt(c),p=f.pathname,h=d.pathname;o||(p=p.toLowerCase(),h=h.toLowerCase());let v,m=p===h||!i&&p.startsWith(h)&&"/"===p.charAt(h.length),g=m?n:void 0;v="function"==typeof a?a({isActive:m}):[a,m?"active":null].filter(Boolean).join(" ");let y="function"==typeof l?l({isActive:m}):l;return(0,r.createElement)(wt,mt({},u,{"aria-current":g,className:v,ref:e,style:y,to:c}),"function"==typeof s?s({isActive:m}):s)}));var xt=function(){return xt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xt.apply(this,arguments)};const St=function(t){var e=function(t){var e=[["Home","/"]];function n(n,r){var o=st({path:n,end:!1},t);if(null!==o){var a=r(o.params);e.push(a)}}return n(":version/locations",(function(t){return["Locations","/".concat(t.version,"/locations")]})),n(":version/locations/:location",(function(t){return[t.location,"/".concat(t.version,"/locations/").concat(t.location)]})),n(":version/locations/:location/:gauge",(function(t){return[t.gauge,"/".concat(t.version,"/locations/").concat(t.location,"/").concat(t.gauge)]})),n(":version/gauges",(function(t){return["Gauges","/".concat(t.version,"/gauges")]})),e}(t.pathname);return i("nav",xt({"aria-label":"breadcrumb"},{children:i("ol",xt({className:"breadcrumb"},{children:e.map((function(t,n){var r=t[0],o=t[1];return n==e.length-1?i("li",xt({className:"breadcrumb-item active","aria-current":"page"},{children:r}),n):i("li",xt({className:"breadcrumb-item"},{children:i(wt,xt({to:o},{children:r}),void 0)}),n)}))}),void 0)}),void 0)},Ct={rootUrl:"/rainfall-rescue-site",rootRawUrl:"https://raw.githubusercontent.com/sktw/rainfall-rescue-site",mapping:{gaugeMap:{origin:{x0:-12e5,y0:622e4},size:{width:145e4,height:238e4}},gaugesMap:{bounds:[[-11,49],[2,61]],radius:724200},esriApiKey:"AAPK226311be69aa47ecaf5dfc337bb3d0de8gjUi3XSWkDRD5uRZJvZC_03ArqPcXMYrTmkwS_lSqQiPbkH-XfLP3wPqk190rGT"},versions:["v1.0.0","v1.1.0","working"]};var Nt=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function jt(t,e){return t.endsWith(e)?t.substring(0,t.length-e.length):t}function Pt(t,e){return t.startsWith(e)?t.substring(e.length):t}function kt(t,e){var n=t.startsWith(e)?e.length:0,r=t.endsWith(e)?t.length-e.length:t.length;return r-n===t.length?t:t.substring(n,r)}function Et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return"";if(1===t.length)return t[0];for(var n=jt(t[0],"/"),r=1;r<t.length-1;r++)n+="/".concat(kt(t[r],"/"));return"".concat(n,"/").concat(Pt(t[t.length-1],"/"))}function Mt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Et.apply(void 0,Nt([Ct.rootUrl,"images"],t,!1))}function At(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Et.apply(void 0,Nt([Ct.rootUrl,"icons"],t,!1))}function Ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Et.apply(void 0,Nt([Ct.rootUrl,"api"],t,!1))}function Tt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Et.apply(void 0,Nt([Ct.rootRawUrl,"versions"],t,!1))}function Lt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=[];e.push(!1);for(var o=0;o<t.length;o++){var a=t[o].trim();a&&r.push(a);var i=e[o];!1!==i&&r.push(i.trim())}return r.join(" ")}function It(t,e,n){void 0===n&&(n={});var r=n.defaultKey,o=void 0===r?"default":r,a=n.breakKey,i=void 0===a?"break":a,l=t in e?e[t]:e[o];return l===i?void 0:l instanceof Function?l():It(l,e,n)}function Rt(t,e){t.sort((function(t,n){var r=e(t),o=e(n);return r<o?-1:r>o?1:0}))}function Dt(t,e,n){return t<e?e:t>n?n:t}function Vt(t){var e=t.split("/");return[parseInt(e[0],10),parseInt(e[1],10)]}function Gt(t){return t.toUpperCase().replace(/[ ]/g,"-")}var Bt=1609.344;function Ut(t){return t/Bt}var Ht=function(){return Ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ht.apply(this,arguments)};function Wt(t){var e=t.currentVersion,n=t.versions;return i("form",Ht({className:"d-flex"},{children:i("div",Ht({className:"dropdown"},{children:[i("button",Ht({id:"version-dropdown",className:"btn btn-outline-secondary dropdown-toggle",type:"button","aria-expanded":"false","data-bs-toggle":"dropdown"},{children:e}),void 0),i("ul",Ht({className:"dropdown-menu dropdown-menu-md-end","aria-labelledby":"version-dropdown"},{children:n.map((function(t){return i("li",t===e?{children:i(Ot,Ht({className:"dropdown-item disabled",to:""},{children:e}),void 0)}:{children:i(Ot,Ht({className:"dropdown-item",to:"/".concat(t)},{children:t}),void 0)},void 0)}))}),void 0)]}),void 0)}),void 0)}const zt=function(t){var e=t.currentVersion,n=t.versions,r=n[n.length-1],o=e||r;return i("nav",Ht({className:"navbar navbar-expand-md navbar-light bg-light"},{children:i("div",Ht({className:"container-fluid"},{children:[i(wt,Ht({className:"navbar-brand",to:"/"},{children:[i("img",{src:At("rainfall-rescue-icon.svg"),alt:"",width:"30",height:"24",className:"d-inline-block align-text-top"},void 0),"Rainfall Rescue"]}),void 0),i("button",Ht({className:"navbar-toggler",type:"button","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation","data-bs-toggle":"collapse","data-bs-target":"#navbar-collapse"},{children:i("span",{className:"navbar-toggler-icon"},void 0)}),void 0),i("div",Ht({id:"navbar-collapse",className:"navbar-collapse collapse"},{children:[i("ul",Ht({className:"navbar-nav me-auto mb-2 mb-md-0"},{children:[i("li",Ht({className:"nav-item"},{children:i(wt,Ht({className:"nav-link",to:"".concat(o,"/locations")},{children:"Locations"}),void 0)}),void 0),i("li",Ht({className:"nav-item"},{children:i(wt,Ht({className:"nav-link",to:"".concat(o,"/gauges")},{children:"Gauges"}),void 0)}),void 0)]}),void 0),i(Wt,{currentVersion:o,versions:n},void 0)]}),void 0)]}),void 0)}),void 0)};var Kt=function(){return Kt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Kt.apply(this,arguments)};function $t(){return i(K,{to:"/not-found",replace:!0},void 0)}function Yt(){return i("div",Kt({className:"rr-not-found container"},{children:i("h1",{children:"Not found!"},void 0)}),void 0)}function Zt(){var t=(0,l.useState)(null),e=t[0],n=t[1],r=(0,l.useCallback)((function(t){n(t)}),[n]);return[e,r]}function qt(){return et()}function Jt(){var t;return null!==(t=et().version)&&void 0!==t?t:""}const Xt=_,Qt=function(){function t(){this.listeners=[],this._nextListeners=[]}return t.prototype.addListener=function(t){this.listeners===this._nextListeners&&(this._nextListeners=this.listeners.slice()),this._nextListeners.push(t)},t.prototype.removeListener=function(t){this.listeners===this._nextListeners&&(this._nextListeners=this.listeners.slice());var e=this._nextListeners.indexOf(t);e>-1&&this._nextListeners.splice(e,1)},t.prototype.emit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.listeners=this._nextListeners,this.listeners.map((function(e){return e.apply(void 0,t)}))},t.prototype.removeAllListeners=function(){this._nextListeners=[]},t}();var te,ee=(te=function(t,e){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},te(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}te(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function ne(t,e){for(var n in e){var r=e[n];(0,Xt.has)(t,n)&&(0,Xt.isPlainObject)(r)?ne(t[n],r):t[n]=r}}function re(t,e){var n,r,o=(0,Xt.toPath)(e);if(0!==o.length)if(1===o.length?(n=t,r=o[0]):(n=(0,Xt.get)(t,o.slice(0,-1)),r=o[o.length-1]),Array.isArray(n)){var a=parseInt(r,10);n.splice(a,1)}else delete n[r]}var oe=function(){function t(){this._eventEmitter=new Qt,this._parent=null,this._key="",this._pendingChanges={},this._batchingCount=0,this._aliases={},this.initialState={},this.children={},this.state={}}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),t.prototype.assignInitialState=function(t){Object.assign(this.initialState,t),Object.assign(this.state,t)},t.prototype.update=function(t){var e=function(t,e){var n={};for(var r in e)n[r]=!0,t[r]=e[r];return n}(this.state,t);this._bubble(e)},t.prototype.onChanges=function(t){},t.prototype.addChild=function(t,e,n){void 0===n&&(n=""),e._parent=this,""!==n?(e._key=n,this._aliases[n]=e):e._key=t,(0,Xt.set)(this.children,t,e),(0,Xt.set)(this.state,t,e.state)},t.prototype.setKey=function(t){this._key=t},t.prototype.setParent=function(t){this._parent=t},t.prototype.removeChild=function(t){var e=this.getChild(t);e._parent=null,re(this.children,e._key),re(this.state,e._key),(0,Xt.has)(this._aliases,t)&&delete this._aliases[t]},t.prototype._bubble=function(t){var e;this._batchingCount>0?ne(this._pendingChanges,t):(this._eventEmitter.emit(t),this._parent&&this._parent._bubble(((e={})[this._key]=t,e))),this.onChanges(t)},t.prototype._endBatch=function(){if(this._batchingCount-=1,0===this._batchingCount){var t=this._pendingChanges;this._pendingChanges={},this._bubble(t)}},t.prototype.getChild=function(t){return(0,Xt.has)(this._aliases,t)?this._aliases[t]:(0,Xt.get)(this.children,t)},t.prototype.batch=function(t){this._batchingCount+=1;try{var e=t();if(function(t){return!!t&&(0,Xt.isFunction)(t.then)}(e))throw new Error("Use batchAsync to batch async functions");return e}finally{this._endBatch()}},t.prototype.batchAsync=function(t){return function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function l(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){return function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:this._batchingCount+=1,e.label=1;case 1:return e.trys.push([1,,3,4]),[4,t()];case 2:return[2,e.sent()];case 3:return this._endBatch(),[7];case 4:return[2]}}))}))},t.prototype.subscribe=function(t){var e=this;return this._eventEmitter.addListener(t),function(){return e._eventEmitter.removeListener(t)}},t.prototype.unsubscribe=function(t){this._eventEmitter.removeListener(t)},t}(),ae=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;for(var r in e)t.prototype.addChild.call(n,r,e[r]);return n}return ee(e,t),e.prototype.addChild=function(e,n,r){var o=this;void 0===r&&(r=""),t.prototype.addChild.call(this,e,n,r),this.batch((function(){o.update({}),n.update({})}))},e.prototype.getChild=function(e){return t.prototype.getChild.call(this,e)},e.prototype.remove=function(e){var n=this,r=this.children[e];this.batch((function(){n.update({}),r.update({})})),t.prototype.removeChild.call(this,e)},e.prototype.forEach=function(t){return(0,Xt.forOwn)(this.children,t)},e.prototype.map=function(t){return(0,Xt.mapValues)(this.children,t)},e.prototype.entries=function(){return(0,Xt.entries)(this.children)},e}(oe),ie=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),le=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({loading:!1,url:null,data:null,error:null}),e}return ie(e,t),e.prototype.setLoading=function(t){this.update({loading:!0,url:t,data:null,error:null})},e.prototype.setData=function(t){this.update({loading:!1,data:t,error:null})},e.prototype.setError=function(t){this.update({loading:!1,data:null,error:t})},e.prototype.fetch=function(t){return function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function l(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var e=this;return function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(n){return this.setLoading(t),[2,fetch(t).then((function(t){if(t.ok)return t.json();throw t})).then((function(t){e.setData(t)})).catch((function(t){t instanceof Response?e.setError({status:t.status,text:t.statusText}):e.setError({status:null,text:t.message})}))]}))}))},e}(oe);const ce=le;var se=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ue=function(t){function e(e){var n=t.call(this)||this,r={mode:e};return n.assignInitialState(r),n}return se(e,t),e.prototype.setMode=function(t){this.update({mode:t})},e}(oe);function fe(t,e,n){if(0!==e.length)for(var r=0,o=e;r<o.length;r++){var a=o[r];if((0,Xt.has)(t,a)){n();break}}else n()}function de(t,e){if(void 0===e&&(e=[]),!(t instanceof oe))throw new Error("Invalid model instance");var n=(0,l.useReducer)((function(t){return t+1}),0)[1],r=(0,l.useRef)(e);(0,l.useLayoutEffect)((function(){var e=function(){return n({})};return t.subscribe((function(t){return fe(t,r.current,e)}))}),[t,r])}function pe(t,e,n){void 0===e&&(e=null),void 0===n&&(n={});var r=n.force,o=void 0!==r&&r,a=(0,l.useMemo)((function(){return null===e?new ce:e}),[e]);return function(t,e,n,r){var o=function(t,e){if(void 0===e&&(e=[]),!(t instanceof oe))throw new Error("Invalid model instance");var n=(0,l.useRef)(0),r=(0,l.useRef)(e);return(0,l.useLayoutEffect)((function(){var e=function(){return n.current=n.current+1};return t.subscribe((function(t){return fe(t,r.current,e)}))}),[t,r,n]),n.current}(t,[]);(0,l.useEffect)(n,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([o,n],null!=r?r:[],!0))}(a,0,(function(){var e=a.state,n=e.url,r=e.loading,i=e.data;r||t===n&&null!==i&&!o||a.fetch(t)}),[t,o]),a}var he,ve,me=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ge=function(){return ge=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ge.apply(this,arguments)};function ye(t){var e=t.mode,n=t.tabs,r=t.handleTabChange,o=(0,l.useCallback)((function(t){var e=t.target;e.hasAttribute("data-mode")&&r(e.getAttribute("data-mode"))}),[r]);return i("ul",ge({class:"nav nav-tabs",role:"tablist",onClick:o},{children:n.map((function(t){var n=t.mode,r=t.title;return i("li",ge({class:"nav-item",role:"presentation"},{children:i("button",ge({className:Lt(he||(he=me(["nav-link ",""],["nav-link ",""])),e===n&&"active"),type:"button",role:"tab","aria-controls":n,"aria-selected":e===n,"data-mode":n},{children:r}),n)}),n)}))}),void 0)}function be(t){var e=t.mode,n=t.renderChildren;return i(r.Fragment,{children:Object.keys(n).map((function(t){return i("div",ge({className:Lt(ve||(ve=me(["",""],["",""])),t!==e&&"d-none")},{children:n[t]()}),t)}))},void 0)}function _e(t){var e=t.mode,n=t.renderChildren,o=t.persist,a=void 0!==o&&o;return i(r.Fragment,{children:a?i(be,{mode:e,renderChildren:n},void 0):e in n?n[e]():null},void 0)}const we=preactCompat;var Oe=function(){return Oe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Oe.apply(this,arguments)},xe=(0,we.forwardRef)((function(t,e){var n=(0,l.useRef)(null),r=Zt(),o=r[0],a=r[1],c=t.value,s=t.onInput,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["value","onInput"]);(0,l.useEffect)((function(){null!==o&&e&&((0,Xt.isFunction)(e)?e(o):e.current=o)}),[o,e]),(0,l.useEffect)((function(){null!==o&&o.setSelectionRange(n.current,n.current)}),[o,n,c]);var f=(0,l.useCallback)((function(t){null!==o&&(n.current=o.selectionStart,s&&s.call(o,t))}),[o,n,s]);return i("input",Oe({ref:a,value:c,onInput:f},u),void 0)}));const Se=xe;var Ce=function(){return Ce=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ce.apply(this,arguments)};const Ne=function(t){var e=Zt(),n=e[0],r=e[1],o=(0,l.useRef)(""),a=t.value,c=t.onBlur,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["value","onBlur"]);o.current="".concat(null!=a?a:""),(0,l.useEffect)((function(){null!==n&&(n.value=o.current)}),[n,o]);var u=document.activeElement;(0,l.useEffect)((function(){null!==n&&n!==u&&(n.value=o.current)}),[a,n,u,o]);var f=(0,l.useCallback)((function(t){null!==n&&(c&&c.call(n,t),n.value=o.current)}),[n,o,c]);return i("input",Ce({ref:r,onBlur:f},s),void 0)};var je=function(){return je=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},je.apply(this,arguments)};const Pe=function(t){var e,n,r=t.handleClear,o=t.value,a=t.className,c=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["handleClear","value","className"]),s=Zt(),u=s[0],f=s[1],d=(0,l.useCallback)((function(){r(),null!==u&&u.focus()}),[u,r]);return i("div",je({className:"d-flex flex-row"},{children:[i(Se,je({ref:f,className:Lt(ke||(e=["form-control rr-clearable-input ",""],n=["form-control rr-clearable-input ",""],Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,ke=e),!!a&&a),value:o},c),void 0),o&&i("div",je({className:"rr-clearable-input__addon"},{children:i("button",{type:"button",className:"btn-close rr-clearable-input__clear-button",title:"Clear",onClick:d},void 0)}),void 0)]}),void 0)};var ke;const Ee=Popper;var Me=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Ae=function(){return Ae=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ae.apply(this,arguments)};function Fe(t,e){var n=function(t){var n=t.className,r=t.width,o=void 0===r?"1rem":r,a=t.height,l=void 0===a?"1rem":a,c=t.fillColor;return i("svg",Ae({xmlns:"http://www.w3.org/2000/svg",className:Lt(Te||(Te=Me(["rr-icon ",""],["rr-icon ",""])),!!n&&n),width:o,height:l,fill:c,viewBox:"0 0 16 16"},{children:e}),void 0)};return n.displayName=t,n}var Te,Le,Ie=Fe("ExternalLinkIcon",i(r.Fragment,{children:[i("path",{"fill-rule":"evenodd",d:"M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z"},void 0),",",i("path",{"fill-rule":"evenodd",d:"M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z"},void 0)]},void 0)),Re=Fe("InfoIcon",i(r.Fragment,{children:[i("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},void 0),i("path",{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"},void 0)]},void 0)),De=Fe("SortAscIcon",i(r.Fragment,{children:i("path",{"fill-rule":"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"},void 0)},void 0)),Ve=Fe("SortDescIcon",i(r.Fragment,{children:i("path",{"fill-rule":"evenodd",d:"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"},void 0)},void 0)),Ge=Fe("SortIcon",i(r.Fragment,{children:i("path",{"fill-rule":"evenodd",d:"M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"},void 0)},void 0));function Be(t){var e=t.className,n=void 0===e?"":e,r=t.width,o=t.height,a=t.fillColor;return i("svg",Ae({xmlns:"http://www.w3.org/2000/svg",className:Lt(Le||(Le=Me(["rr-icon ",""],["rr-icon ",""])),n),width:r,height:o,fill:a,viewBox:"0 0 32 32"},{children:[i("path",{d:"M5 2v28h22V2h-2v25.917H7V2Z"},void 0),i("path",{d:"M8 10v2h3v2H8v6h3v2H8v5h16V10Z"},void 0),i("path",{d:"M7 4h4v2H7Z"},void 0)]}),void 0)}var Ue=function(){return Ue=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ue.apply(this,arguments)};const He=function(t){var e,n,r=t.className,o=t.children,a=Zt(),c=a[0],s=a[1],u=(0,l.useState)(null),f=u[0],d=u[1],p=(0,l.useState)(!1),h=p[0],v=p[1];return(0,l.useLayoutEffect)((function(){if(null!==c&&null!==f){var t=(0,Ee.createPopper)(c,f,{placement:"right",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"eventListeners",enabled:!0}]}),e=function(t){c.contains(t.target)||v(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e),t.destroy()}}}),[f,c,v]),i("div",Ue({className:Lt(We||(e=["position-relative ",""],n=["position-relative ",""],Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,We=e),!!r&&r)},{children:[i("button",Ue({ref:s,type:"button",className:"rr-info__button",onClick:function(){v(!h),h||d(null)}},{children:i(Re,{},void 0)}),void 0),h&&i("div",Ue({ref:d,class:"popover fade show bs-popover-end rr-info__popover",role:"tooltip"},{children:[i("div",{className:"popover-arrow","data-popper-arrow":!0},void 0),i("div",Ue({className:"popover-body"},{children:o}),void 0)]}),void 0)]}),void 0)};var We;const ze=function(t){return(0,t.validator)(qt())?i($,{},void 0):i($t,{},void 0)};var Ke=function(){return Ke=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ke.apply(this,arguments)};const $e=function(){return i("div",Ke({className:"d-flex justify-content-center"},{children:i("div",Ke({className:"rr-loading spinner-border",role:"status"},{children:i("span",Ke({className:"visually-hidden"},{children:"Loading..."}),void 0)}),void 0)}),void 0)};var Ye=function(){return Ye=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ye.apply(this,arguments)};const Ze=function(t){var e=t.model,n=t.redirectNotFound,r=void 0!==n&&n,o=t.children,a=(0,l.useState)(!1),c=a[0],s=a[1];de(e);var u=e.state,f=u.loading,d=u.data,p=u.error;return(0,l.useEffect)((function(){if(f){var t=setTimeout((function(){return s(!0)}),500);return function(){clearTimeout(t)}}}),[f]),f&&c?i($e,{},void 0):null!==p?404===p.status&&r?i($t,{},void 0):i("div",Ye({className:"rr-error"},{children:"Error!"}),void 0):null!==d?o(d):null};var qe=function(){return qe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},qe.apply(this,arguments)};const Je=function(){return i(r.Fragment,{children:[i("h1",qe({className:"display-3"},{children:"Rainfall Rescue"}),void 0),i("p",{children:["A prototype website for ",i("a",qe({href:"https://github.com/ed-hawkins/rainfall-rescue"},{children:"rainfall-rescue"}),void 0),"!"]},void 0)]},void 0)};var Xe=function(){return Xe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Xe.apply(this,arguments)};const Qe=function(t){var e=t.gauges;return i("ul",Xe({className:"list-group list-group-flush"},{children:e.map((function(t){var e=t.name;return i("li",Xe({className:"list-group-item"},{children:i(wt,Xe({to:e},{children:e}),void 0)}),e)}))}),void 0)},tn=Chart,en=luxon,nn={datetime:en.DateTime.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:en.DateTime.TIME_WITH_SECONDS,minute:en.DateTime.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};tn._adapters._date.override({_id:"luxon",_create:function(t){return en.DateTime.fromMillis(t,this.options)},formats:function(){return nn},parse:function(t,e){const n=this.options;if(null==t)return null;const r=typeof t;return"number"===r?t=this._create(t):"string"===r?t="string"==typeof e?en.DateTime.fromFormat(t,e,n):en.DateTime.fromISO(t,n):t instanceof Date?t=en.DateTime.fromJSDate(t,n):"object"!==r||t instanceof en.DateTime||(t=en.DateTime.fromObject(t)),t.isValid?t.valueOf():null},format:function(t,e){const n=this._create(t);return"string"==typeof e?n.toFormat(e,this.options):n.toLocaleString(e)},add:function(t,e,n){const r={};return r[n]=e,this._create(t).plus(r).valueOf()},diff:function(t,e,n){return this._create(t).diff(this._create(e)).as(n).valueOf()},startOf:function(t,e,n){if("isoWeek"===e){n=Math.trunc(Math.min(Math.max(0,n),6));const e=this._create(t);return e.minus({days:(e.weekday-n+7)%7}).startOf("day").valueOf()}return e?this._create(t).startOf(e).valueOf():t},endOf:function(t,e){return this._create(t).endOf(e).valueOf()}});var rn=function(){return rn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},rn.apply(this,arguments)};function on(t){return"hsl(".concat(137.508*t%360,",").concat(70,"%,").concat(75,"%)")}function an(t){var e,n,r,o,a=null===(n=null===(e=null==t?void 0:t.parsed)||void 0===e?void 0:e._custom)||void 0===n?void 0:n.start,i=null===(o=null===(r=null==t?void 0:t.parsed)||void 0===r?void 0:r._custom)||void 0===o?void 0:o.end;if(void 0===a||void 0===i)return"";var l=en.DateTime.fromMillis(a),c=en.DateTime.fromMillis(i);return l.equals(c)?"".concat(l.toFormat("yyyy/MM")):"".concat(l.toFormat("yyyy/MM"),"-").concat(c.toFormat("yyyy/MM"))}function ln(t){var e;return null!==(e=t[0].dataset.label)&&void 0!==e?e:""}const cn=function(t){var e=t.gauges,n=(0,l.useRef)(null),r=Zt(),o=r[0],a=r[1];return(0,l.useEffect)((function(){if(null!==o)return n.current=function(t,e){var n=[];e.forEach((function(t,e){var r=t.name,o=t.ranges.map((function(t){var e=t[0],n=t[1],r=Vt(e),o=r[0],a=r[1],i=Vt(n),l=i[0],c=i[1];return{x:[en.DateTime.fromObject({year:o,month:a}),en.DateTime.fromObject({year:l,month:c})],y:"range"}}));n.push({label:r,data:o,maxBarThickness:20,backgroundColor:on(e)})}));var r=t.getContext("2d");if(null===r)return null;var o=new tn.Chart(r,{type:"bar",data:{datasets:n},options:{animation:!1,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{type:"time",title:{display:!0,text:"Date"}},y:{display:!1}},plugins:{legend:{onClick:Xt.noop},tooltip:{callbacks:{label:an,title:ln}}}}});return null!==t.parentElement&&(t.parentElement.style.height="".concat(100+50*n.length,"px")),o}(o,e),function(){null!==n.current&&n.current.destroy()}}),[o,n,e]),i("div",rn({className:"position-relative"},{children:i("canvas",{ref:a},void 0)}),void 0)};var sn=function(){return sn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},sn.apply(this,arguments)};function un(t){var e=t.currentVersion,n=t.entry,r=n.version,o=n.name,a=n.changes;return i("li",sn({className:"list-group-item d-flex flex-row"},{children:[i("div",sn({className:"rr-location-history-line__version"},{children:r===e||null===o?i("span",{children:r},void 0):i(wt,sn({to:"/".concat(r,"/locations/").concat(o)},{children:r}),void 0)}),void 0),i("div",sn({className:"flex-grow-1"},{children:i("ul",sn({className:"rr-location-history-line__changes"},{children:a.map((function(t,e){return i("li",{children:t},e)}))}),void 0)}),void 0)]}),void 0)}const fn=function(t){var e=t.version,n=t.history;return i("ul",sn({className:"list-group list-group-flush"},{children:n.map((function(t){return 0==t.changes.length?null:i(un,{currentVersion:e,entry:t},void 0)}))}),void 0)};var dn=function(){return dn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},dn.apply(this,arguments)};const pn=function(t){var e=t.version,n=t.location,o=t.data,a=o.gauges,l=o.history,c=o.links;return i(r.Fragment,{children:[i("h1",dn({className:"mb-5"},{children:n}),void 0),i("div",dn({className:"row mb-5"},{children:i("div",dn({className:"col"},{children:[i("h2",dn({className:"fs-4"},{children:"Gauges"}),void 0),i(Qe,{gauges:a},void 0)]}),void 0)}),void 0),i("div",dn({className:"mb-5"},{children:[i("h2",dn({className:"fs-4"},{children:"Ranges"}),void 0),i(cn,{gauges:a},void 0)]}),void 0),i("div",dn({className:"mb-5"},{children:[i("h2",dn({className:"fs-4"},{children:"History"}),void 0),i(fn,{version:e,history:l},void 0)]}),void 0),i("div",dn({className:"row mb-5"},{children:i("div",dn({className:"col"},{children:[i("h2",dn({className:"fs-4"},{children:"Links"}),void 0),i("ul",dn({className:"list-group list-group-flush"},{children:i("li",dn({className:"list-group-item"},{children:i("a",dn({href:c.folder,target:"_blank",rel:"noreferrer"},{children:["Github folder",i(Ie,{className:"ms-1"},void 0)]}),void 0)}),void 0)}),void 0)]}),void 0)}),void 0)]},void 0)};var hn=function(){return hn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},hn.apply(this,arguments)};const vn=function(){var t=qt(),e=t.version,n=t.location,r=pe(Tt(e,"locations","".concat(n,".json")));return i(Ze,hn({model:r,redirectNotFound:!0},{children:function(t){return i(pn,{version:e,location:n,data:t},void 0)}}),void 0)};var mn=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},gn=function(){return gn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},gn.apply(this,arguments)};const yn=function(t){var e=t.pageCount,n=t.currentPage,r=t.maxItemCount,o=t.handleNavigate,a=function(t,e,n){var r,o,a=Math.min(t,n),i=Math.floor(a/2),l=a-i-1;e<=i?(r=1,o=a):e+l>=t?(o=t,r=t-a+1):(r=e-i,o=e+l);for(var c=[],s=[],u=r;u<e;u++)c.push(u);for(u=e+1;u<=o;u++)s.push(u);return[c,s]}(e,n,r),l=a[0],c=a[1];return i("nav",gn({"aria-label":"pagination"},{children:i("ul",gn({className:"pagination pagination-sm flex-wrap justify-content-end",onClick:function(t){var e=t.target;if(e instanceof HTMLElement&&e.dataset.page){t.preventDefault();var n=parseInt(e.dataset.page,10);o(n),e.blur()}}},{children:[i("li",gn({className:Lt(bn||(bn=mn(["page-item d-none d-sm-block ",""],["page-item d-none d-sm-block ",""])),1===n&&"disabled")},{children:i("a",gn({className:"page-link",href:"#","data-page":"1"},{children:"First"}),void 0)}),void 0),i("li",gn({className:Lt(_n||(_n=mn(["page-item ",""],["page-item ",""])),1===n&&"disabled")},{children:i("a",gn({className:"page-link",href:"#","data-page":n-1},{children:"Previous"}),void 0)}),void 0),l.map((function(t){return i("li",gn({className:"page-item d-none d-md-block"},{children:i("a",gn({className:"page-link",href:"#","data-page":t},{children:t}),void 0)}),t)})),i("li",gn({className:"page-item active"},{children:i("span",gn({className:"page-link"},{children:n}),void 0)}),void 0),c.map((function(t){return i("li",gn({className:"page-item d-none d-md-block"},{children:i("a",gn({className:"page-link",href:"#","data-page":t},{children:t}),void 0)}),t)})),i("li",gn({className:Lt(wn||(wn=mn(["page-item ",""],["page-item ",""])),n===e&&"disabled")},{children:i("a",gn({className:"page-link",href:"#","data-page":n+1},{children:"Next"}),void 0)}),void 0),i("li",gn({className:Lt(On||(On=mn(["page-item d-none d-sm-block ",""],["page-item d-none d-sm-block ",""])),n===e&&"disabled")},{children:i("a",gn({className:"page-link",href:"#","data-page":e},{children:"Last"}),void 0)}),void 0)]}),void 0)}),void 0)};var bn,_n,wn,On,xn=function(){return xn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xn.apply(this,arguments)};const Sn=function(t){var e=t.field,n=t.sort,r=t.handleSort,o=n.active,a=n.order,c=(0,l.useCallback)((function(){r(e)}),[e,r]);return i("button",xn({className:"rr-table__sort-button",type:"button",title:o?"asc"===a?"Sort ascending":"Sort descending":"Sort",onClick:c},{children:[o&&"asc"===a&&i(De,{className:"rr-table__sort-icon-asc"},void 0),o&&"desc"===a&&i(Ve,{className:"rr-table__sort-icon-desc"},void 0),!o&&i(Ge,{className:"rr-table__sort-icon"},void 0)]}),void 0)};var Cn=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Nn=function(){return Nn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Nn.apply(this,arguments)};function jn(t,e,n,r){switch(void 0===n&&(n="text"),void 0===r&&(r={}),n){case"text":return t;case"float":return"".concat(t);case"link":return function(t,e,n){var r=e[n.urlField];return i(wt,Nn({to:r},{children:t}),void 0)}(t,e,r);case"custom":return function(t,e){return e.formatter(t)}(t,r);default:throw new Error("Unknown format")}}function Pn(t,e){var n,r=t.frozen,o=void 0!==r&&r;return Lt(En||(En=Cn([""," "," ",""],[""," "," ",""])),o&&"rr-frozen-column",!!t.className&&t.className,!!e&&(null!==(n=e[t.field])&&void 0!==n?n:""))}const kn=function(t){var e=t.columns,n=t.data,r=t.className,o=void 0===r?"":r,a=t.cellClassNames,l=void 0===a?[]:a,c=t.fieldSorts,s=void 0===c?{}:c,u=t.handleSort,f=void 0===u?Xt.noop:u;return i("table",Nn({className:Lt(Mn||(Mn=Cn(["table ",""],["table ",""])),o)},{children:[i("thead",{children:i("tr",{children:e.map((function(t){return i("th",Nn({scope:"col",className:Pn(t)},{children:[t.title,t.sortable&&i(Sn,{field:t.field,sort:s[t.field],handleSort:f},void 0)]}),t.field)}))},void 0)},void 0),i("tbody",{children:n.map((function(t,n){return i("tr",{children:e.map((function(e){return i("td",Nn({className:Pn(e,l[n])},{children:jn(t[e.field],t,e.format,e.formatParams)}),e.field)}))},n)}))},void 0)]}),void 0)};var En,Mn;function An(t){return t.reduce((function(t,e){return t[e.field]={active:!1,order:"asc"},t}),{})}function Fn(t){return t.reduce((function(t,e){return t[e.field]=null,t}),{})}function Tn(t){return t.reduce((function(t,e){var n=e.field,r=e.sortKey;return t[n]=null!=r?r:Xt.identity,t}),{})}function Ln(t){return t.startsWith("*")?t.endsWith("*")?{contains:t.slice(1,-1)}:{endsWith:t.slice(1)}:t.endsWith("*")?{startsWith:t.slice(0,-1)}:{startsWith:t}}var In={equals:function(t,e){return t===e},startsWith:function(t,e){return t.startsWith(e)},endsWith:function(t,e){return t.endsWith(e)},contains:function(t,e){return t.indexOf(e)>-1},lessThanEqual:function(t,e){return t<=e},greaterThanEqual:function(t,e){return t>=e},anyIn:function(t,e){for(var n=0,r=t;n<r.length;n++){var o=r[n];if(e.has(o))return!0}return!1}};var Rn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dn=function(){return Dn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Dn.apply(this,arguments)},Vn=function(t){function e(e,n,r){var o=t.call(this)||this,a={columns:e,data:[],pageSize:n,pageCount:0,sorts:[],fieldSorts:An(e),fieldSortKeys:Tn(e),filters:Fn(e),currentPage:1,maxItemCount:r,sortedRows:[],filteredRows:[]};return o.assignInitialState(a),o}return Rn(e,t),e.prototype._getUpdatedFilters=function(t,e,n){var r,o,a,i=this.state.filters,l=null!==(a=i[t])&&void 0!==a?a:{};return Dn(Dn({},i),((r={})[t]=Dn(Dn({},l),((o={})[e]=n,o)),r))},e.prototype._applyFilters=function(){var t=this.state,e=t.filters,n=t.pageSize,r=function(t,e){var n=function(t){var e=[];return Object.keys(t).forEach((function(n){var r=t[n];null!==r&&Object.keys(r).forEach((function(t){if(null!==r[t]){var o=r[t],a=In[t];e.push((function(t){return a(t[n],o)}))}}))})),0===e.length?null:function(t){return e.every((function(e){return e(t)}))}}(t);return null===n?e:e.filter(n)}(e,t.sortedRows),o=function(t,e){return Math.max(Math.ceil(t.length/e),1)}(r,n);this.update({filteredRows:r,pageCount:o,currentPage:1})},e.prototype._applySorts=function(){var t=this,e=this.state,n=function(t,e,n,r){if(0===n.length)return r;var o=function(t,e,n){for(var r=[],o=[],a=function(n){var a=t[n].order,i=e[n];r.push(a),o.push((function(t){return i(t[n])}))},i=0,l=n;i<l.length;i++)a(l[i]);return[r,o]}(t,e,n),a=o[0],i=o[1];return(0,Xt.orderBy)(r,i,a)}(e.fieldSorts,e.fieldSortKeys,e.sorts,e.data);this.batch((function(){t.update({sortedRows:n}),t._applyFilters()}))},e.prototype.setData=function(t){var e=this;this.batch((function(){e.update({data:t}),e._applySorts()}))},e.prototype.navigate=function(t){var e=this.state.pageCount;t>=1&&t<=e&&this.update({currentPage:t})},e.prototype.setSortOrder=function(t,e){var n=this,r=this.state.fieldSorts;r[t].order=e,this.batch((function(){n.update({fieldSorts:r}),r[t].active&&n._applySorts()}))},e.prototype.toggleSortActive=function(t){var e=this,n=this.state,r=n.fieldSorts,o=n.sorts,a=r[t].active;r[t].active=!a;var i=o.indexOf(t);-1===i?o.unshift(t):o.splice(i,1),this.batch((function(){e.update({fieldSorts:r,sorts:o}),e._applySorts()}))},e.prototype.toggleSort=function(t){var e=this,n=this.state.fieldSorts[t],r=n.active,o=n.order;this.batch((function(){r?"asc"===o?e.setSortOrder(t,"desc"):(e.toggleSortActive(t),e.setSortOrder(t,"asc")):e.toggleSortActive(t)}))},e.prototype.setFilter=function(t,e,n){var r=this,o=this._getUpdatedFilters(t,e,n);this.batch((function(){r.update({filters:o}),r._applyFilters()}))},e.prototype.clearFilter=function(t,e){var n=this,r=this._getUpdatedFilters(t,e,null);this.batch((function(){n.update({filters:r}),n._applyFilters()}))},e.prototype.setFilters=function(t){var e=this;this.batch((function(){e.update({filters:t}),e._applyFilters()}))},e.prototype.setDataAndFilters=function(t,e){var n=this;this.batch((function(){n.update({data:t,filters:e}),n._applySorts()}))},e.prototype.getRowCount=function(){return this.state.filteredRows.length},e.prototype.getFilteredData=function(){var t=this.state,e=t.pageSize;return function(t,e,n){return t.slice(n*(e-1),n*e)}(t.filteredRows,t.currentPage,e)},e}(oe);const Gn=Vn;var Bn=function(){return Bn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Bn.apply(this,arguments)};function Un(){return i(r.Fragment,{children:[i("p",{children:"Show all locations whose names begin with the search term. The following wildcard (*) searches are also available:"},void 0),i("ul",{children:[i("li",{children:"*SOUTH matches all locations whose names end with SOUTH, e.g. FAIR-ISLE-SOUTH."},void 0),i("li",{children:"*SOUTH* matches all locations whose name contain SOUTH anywhere, e.g. BERMONDSEY-SOUTHWARK-PARK, SOUTHAM, FAIR-ISLE-SOUTH."},void 0),i("li",{children:"For completeness SOUTH* matches all locations whose names begin with SOUTH, e.g. SOUTHAM."},void 0)]},void 0),i("p",{children:["Other wildcard searches are ",i("b",{children:"not"},void 0)," supported, e.g. SO*H."]},void 0)]},void 0)}const Hn=function(t){var e=t.model;de(e);var n=(0,l.useCallback)((function(t){if(t.target instanceof HTMLInputElement){var n=t.target.value;""===n?e.clearFilter():e.setFilter(n)}}),[e]),r=(0,l.useCallback)((function(){e.clearFilter()}),[e]),o=e.state.name;return i("div",Bn({className:"d-flex flex-column align-items-start mb-3"},{children:[i("div",Bn({className:"d-flex flex-row mb-1"},{children:[i("label",Bn({htmlFor:"search-input"},{children:"Search"}),void 0),i(He,Bn({className:"ms-1"},{children:i(Un,{},void 0)}),void 0)]}),void 0),i("div",Bn({className:"d-flex flex-row"},{children:i(Pe,{type:"text",id:"search-input",placeholder:"Location",onInput:n,value:o,autoComplete:"off",spellcheck:!1,handleClear:r},void 0)}),void 0)]}),void 0)},Wn=function(t){var e=t.model.children,n=e.filter,r=e.table;de(r);var o=r.state,a=o.columns,c=o.currentPage,s=o.pageCount,u=o.maxItemCount,f=o.fieldSorts,d=r.getFilteredData(),p=(0,l.useCallback)((function(t){r.navigate(t)}),[r]),h=(0,l.useCallback)((function(t){r.toggleSort(t)}),[r]);return i("div",{children:[i(Hn,{model:n},void 0),i(kn,{className:"table-striped table-bordered",columns:a,data:d,fieldSorts:f,handleSort:h},void 0),i(yn,{pageCount:s,currentPage:c,maxItemCount:u,handleNavigate:p},void 0)]},void 0)};var zn=function(){return zn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},zn.apply(this,arguments)};const Kn=function(t){var e=t.model,n=Jt(),o=e.children.versions.getChild(n).children,a=o.fetcher,l=o.locations;return pe(Ft(n,"metadata.json"),a),i(r.Fragment,{children:[i("h1",zn({className:"mb-5"},{children:"Locations"}),void 0),i(Ze,zn({model:a},{children:function(){return i(Wn,{model:l},void 0)}}),void 0)]},void 0)};var $n=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Yn=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({name:""}),e}return $n(e,t),e.prototype.setFilter=function(t){this.update({name:Gt(t)})},e.prototype.clearFilter=function(){this.update({name:""})},e}(oe);var Zn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qn=[{field:"location",title:"Location",format:"link",formatParams:{urlField:"url"},sortable:!0}],Jn=function(t){function e(e){var n=t.call(this)||this,r={version:e};return n.assignInitialState(r),n.addChild("filter",new Yn),n.addChild("table",new Gn(qn,10,3)),n}return Zn(e,t),e.prototype.onChanges=function(t){if((0,Xt.has)(t,"filter")){var e={url:null,location:Ln(this.children.filter.state.name)};this.children.table.setFilters(e)}},e.prototype.setData=function(t){this.children.table.setData(function(t){var e=t.map((function(t){var e=t.name;return{location:e,url:e}}));return e}(t.locations)),this.children.filter.clearFilter()},e}(oe);const Xn=Jn;var Qn=function(){return Qn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Qn.apply(this,arguments)};function tr(t){var e=t.label,n=t.children;return i("li",Qn({className:"list-group-item d-flex"},{children:[i("div",{children:e},void 0),i("div",Qn({className:"ms-auto"},{children:n}),void 0)]}),void 0)}const er=function(t){var e=t.metadata;return i("ul",Qn({className:"list-group list-group-flush"},{children:[i(tr,Qn({label:"Title"},{children:e.station}),void 0),i(tr,Qn({label:"Station number"},{children:e.stationNo}),void 0),i(tr,Qn({label:"Grid reference"},{children:e.gridRef}),void 0),i(tr,Qn({label:"Longitude"},{children:e.lon}),void 0),i(tr,Qn({label:"Latitude"},{children:e.lat}),void 0),i(tr,Qn({label:"Elevation"},{children:"".concat(e.elevation,"ft")}),void 0),i(tr,Qn({label:"County"},{children:"".concat(e.counties.join(", "))}),void 0)]}),void 0)};function nr(t){return t*Math.PI/180}function rr(t){return 180*t/Math.PI}var or=6378137;function ar(t,e,n,r){var o=nr(n-t),a=nr(r-e),i=nr(e+r)/2,l=o*Math.cos(i),c=a;return or*Math.sqrt(l*l+c*c)}function ir(t,e,n,r){var o=n/or,a=nr(t),i=nr(e),l=i+o*Math.cos(r),c=(i+l)/2;return[rr(a+o*Math.sin(r)/Math.cos(c)),rr(l)]}function lr(t,e){return t/Math.pow(2,e)*360-180}function cr(t,e){var n=Math.PI-2*Math.PI*t/Math.pow(2,e);return rr(Math.atan(.5*(Math.exp(n)-Math.exp(-n))))}var sr=function(){return sr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},sr.apply(this,arguments)},ur=Ct.mapping.gaugeMap,fr=ur.size,dr=fr.width,pr=fr.height,hr=ur.origin,vr=hr.x0,mr=hr.y0,gr=1e3,yr=Math.floor(gr*pr/dr);const br=function(t){var e=function(t,e){var n=function(t,e){var n=nr(t),r=nr(e);return[or*n,or*Math.log(Math.tan(Math.PI/4+r/2))]}(t,e),r=n[0],o=n[1];return[Math.floor(gr*(r-vr)/dr),Math.floor(yr*(pr-o+mr)/pr)]}(t.lon,t.lat),n=e[0],r=e[1];return i("div",sr({className:"d-flex justify-content-center"},{children:i("svg",sr({xmlns:"http://www.w3.org/2000/svg",height:"400px",viewBox:"0 0 ".concat(gr," ").concat(yr)},{children:[i("image",{href:Mt("map.svg"),height:"100%"},void 0),i("circle",{cx:n,cy:r,r:"15",fill:"red"},void 0)]}),void 0)}),void 0)};ChartZoom;var _r=function(){return _r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},_r.apply(this,arguments)};const wr=function(t){var e=t.table,n=Zt(),r=n[0],o=n[1],a=Zt(),c=a[0],s=a[1],u=(0,l.useRef)(null);(0,l.useEffect)((function(){if(null!==r)return u.current=function(t,e){for(var n,r,o=e[0],a=o.length,i=[],l=0;l<a;l++)for(var c=o[l],s=1;s<e.length-1;s++){var u=e[s][l],f=en.DateTime.fromObject({year:c,month:s});""===u||-999==Number(u)?i.push({x:f,y:null}):i.push({x:f,y:Number(u)})}var d=t.getContext("2d");if(null===d)return null;var p=new tn.Chart(d,{type:"line",data:{datasets:[{label:"Monthly Rainfall",data:i,borderWidth:1,borderColor:"rgb(255, 0, 0)"}]},options:{animation:!1,maintainAspectRatio:!1,scales:{x:{type:"time",title:{display:!0,text:"Date"},time:{unit:"year",tooltipFormat:"MMMM yyyy"}},y:{title:{display:!0,text:"Rainfall (in)"},min:0}},plugins:{legend:{onClick:Xt.noop},zoom:{pan:{enabled:!0,mode:"x"},zoom:{mode:"x",wheel:{enabled:!0}},limits:{x:{min:"original",max:"original"}}}}}}),h=p.scales.y.max,v=null===(r=null===(n=null==p?void 0:p.options)||void 0===n?void 0:n.scales)||void 0===r?void 0:r.y;return void 0!==v&&(v.max=h),p.update(),p}(r,e),function(){null!==u.current&&u.current.destroy()}}),[r,u,e]);var f=(0,l.useCallback)((function(){c&&c.classList.add("rr-gauge-chart__wrapper--show-scroll-message")}),[c]);return function(t,e,n){var r=(0,l.useState)(!1),o=r[0],a=r[1],i=(0,l.useCallback)((function(t){return a(!0),n instanceof Function?n(t):n.handleEvent(t)}),[n]);(0,l.useEffect)((function(){if(t)return o||t.addEventListener(e,i,{once:!0}),function(){t&&t.removeEventListener(e,i)}}),[t,e,o,a,i])}(c,"mouseover",f),i("div",_r({ref:s,className:"rr-gauge-chart__wrapper position-relative"},{children:[i("div",_r({className:"rr-gauge-chart__container position-relative"},{children:i("canvas",{ref:o},void 0)}),void 0),i("div",_r({className:"rr-gauge-chart__scroll-message"},{children:"Scroll to zoom"}),void 0)]}),void 0)};var Or=function(){return Or=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Or.apply(this,arguments)},xr=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Sr=["January","February","March","April","May","June","July","August","September","October","November","December"];const Cr=function(t){var e=t.table,n=t.cellClassNames,r=e[0],o=(0,l.useMemo)((function(){for(var t=[{field:"month",title:"",frozen:!0}],e=0;e<r.length;e++){var n=r[e];t.push({field:"".concat(n),title:"".concat(n)})}return t}),[r]),a=(0,l.useMemo)((function(){for(var t=xr(xr([],Sr,!0),["Total"],!1),n=[],o=1;o<e.length;o++){for(var a={month:t[o-1]},i=0;i<e[o].length;i++)a[r[i]]=e[o][i];n.push(a)}return n}),[r,e]);return i("div",Or({className:"table-responsive position-relative"},{children:i(kn,{className:"table-striped table-sm rr-table__frozen-column",columns:o,data:a,cellClassNames:n},void 0)}),void 0)};var Nr=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function jr(t,e,n){return e?n?"".concat(e," (").concat(n,")"):e:n||"Data source ".concat(t+1)}var Pr=function(){return Pr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Pr.apply(this,arguments)};function kr(t){var e=t.classNameMap;return i("div",Pr({className:"d-flex flex-column"},{children:Array.from(e).map((function(t){var e,n,r=t[0],o=t[1];return i("div",Pr({className:"px-2 py-1"},{children:[i("div",{className:Lt(Mr||(e=["rr-gauge-tyr-file-key ",""],n=["rr-gauge-tyr-file-key ",""],Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,Mr=e),o)},void 0),i("span",{children:r},void 0)]}),r)}))}),void 0)}const Er=function(t){var e=t.table,n=t.structure,r=(0,l.useMemo)((function(){return function(t){for(var e=[],n=1;n<14;n++)e.push({});for(var r=new Map,o=function(t){var e=Nr(Nr([],t.data,!0),t.external,!0);return Rt(e,(function(t){return t.startDate})),e}(t),a=0,i=0,l=o;i<l.length;i++){var c=l[i],s=c.filename,u=c.comment,f=jr(a,s,u);r.has(f)||r.set(f,"rr-background-color-".concat(a++))}for(var d=function(t,n,o,i){var l=Vt(o),c=Vt(i),s=jr(a,t,n);!function(t,e,n){var r=t[0],o=t[1],a=e[0],i=e[1];if(r===a)for(var l=o;l<=i;l++)n([r,l]);else{for(l=o;l<14;l++)n([r,l]);for(var c=r+1;c<a;c++)for(l=1;l<14;l++)n([c,l]);for(l=1;l<=i;l++)n([a,l])}}(l,c,(function(t){var n=t[0],o=t[1];e[o-1][n]=r.get(s)||""}))},p=0,h=o;p<h.length;p++){var v=h[p];d(s=v.filename,u=v.comment,v.startDate,v.endDate)}return[e,r]}(n)}),[n]),o=r[0],a=r[1];return i("div",{children:[i("div",Pr({className:"mb-3"},{children:i(Cr,{table:e,cellClassNames:o},void 0)}),void 0),i(kr,{classNameMap:a},void 0)]},void 0)};var Mr;const Ar=function(t){return i("ul",{children:t.comments.map((function(t,e){return i("li",{children:t},e)}))},void 0)};var Fr=function(){return Fr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Fr.apply(this,arguments)};function Tr(t){var e=t.currentVersion,n=t.entry,r=n.version,o=n.location,a=n.name,l=n.changes;return i("li",Fr({className:"list-group-item d-flex flex-row"},{children:[i("div",Fr({className:"rr-gauge-history-line__version"},{children:r===e||null===o||null===a?i("span",{children:r},void 0):i(wt,Fr({to:"/".concat(r,"/locations/").concat(o,"/").concat(a)},{children:r}),void 0)}),void 0),i("div",Fr({className:"flex-grow-1"},{children:i("ul",Fr({className:"rr-gauge-history-line__changes"},{children:l.map((function(t,e){return i("li",{children:t},e)}))}),void 0)}),void 0)]}),void 0)}const Lr=function(t){var e=t.version,n=t.history;return i("ul",Fr({className:"list-group list-group-flush"},{children:n.map((function(t){return 0==t.changes.length?null:i(Tr,{currentVersion:e,entry:t},void 0)}))}),void 0)};var Ir=function(){return Ir=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ir.apply(this,arguments)};const Rr=function(t){var e=t.version,n=t.name,o=t.data,a=o.metadata,l=o.table,c=o.structure,s=o.comments,u=o.history,f=o.links,d=a.lon,p=a.lat;return i(r.Fragment,{children:[i("h1",Ir({className:"mb-5"},{children:n}),void 0),i("div",Ir({className:"row gx-5"},{children:[i("div",Ir({className:"col-md mb-5"},{children:[i("h2",Ir({className:"fs-4"},{children:"Metadata"}),void 0),i(er,{metadata:a},void 0)]}),void 0),null!==d&&null!==p&&i("div",Ir({className:"col-md mb-5"},{children:[i("h2",Ir({className:"fs-4"},{children:"Map"}),void 0),i(br,{lon:d,lat:p},void 0)]}),void 0)]}),void 0),i("div",Ir({className:"mb-5"},{children:[i("h2",Ir({className:"fs-4"},{children:"Rainfall"}),void 0),i(wr,{table:l},void 0)]}),void 0),i("div",Ir({className:"mb-5"},{children:[i("h2",Ir({className:"fs-4"},{children:"Data"}),void 0),i(Er,{table:l,structure:c},void 0)]}),void 0),s.length>0&&i("div",Ir({className:"mb-5"},{children:[i("h2",Ir({className:"fs-4"},{children:"Notes"}),void 0),i(Ar,{comments:s},void 0)]}),void 0),i("div",Ir({className:"mb-5"},{children:[i("h2",Ir({className:"fs-4"},{children:"History"}),void 0),i(Lr,{version:e,history:u},void 0)]}),void 0),i("div",Ir({className:"row mb-5"},{children:i("div",Ir({className:"col"},{children:[i("h2",Ir({className:"fs-4"},{children:"Links"}),void 0),i("ul",Ir({className:"list-group list-group-flush"},{children:i("li",Ir({className:"list-group-item"},{children:i("a",Ir({href:f.dataFile,target:"_blank",rel:"noreferrer"},{children:["Data file",i(Ie,{className:"ms-1"},void 0)]}),void 0)}),void 0)}),void 0)]}),void 0)}),void 0)]},void 0)};var Dr=function(){return Dr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Dr.apply(this,arguments)};const Vr=function(){var t=qt(),e=t.version,n=t.gauge,r=pe(Tt(e,"gauges","".concat(n,".json")));return i(Ze,Dr({model:r,redirectNotFound:!0},{children:function(t){return i(Rr,{version:e,name:n,data:t},void 0)}}),void 0)};var Gr=function(){return Gr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Gr.apply(this,arguments)};function Br(t){var e=t.id,n=t.label,r=t.model,o=t.info,a=t.children;de(r);var c=r.state.active,s=(0,l.useCallback)((function(){r.toggleActive()}),[r]);return i("div",Gr({className:"d-flex flex-column mb-3"},{children:[i("div",Gr({className:"d-flex flex-row"},{children:[i("input",{className:"form-check-input",type:"checkbox",checked:c,id:e,onChange:s},void 0),i("label",Gr({className:"form-check-label ms-2",for:e},{children:n}),void 0),o&&i(He,Gr({className:"ms-1 flex-grow-1"},{children:o}),void 0)]}),void 0),c&&a]}),void 0)}var Ur=function(){return Ur=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ur.apply(this,arguments)};function Hr(){return i(r.Fragment,{children:[i("p",{children:"Show all gauges whose names begin with the search term. The following wildcard (*) searches are also available:"},void 0),i("ul",{children:[i("li",{children:"*SOUTH matches all gauges whose names end with SOUTH, e.g. FAIR-ISLE-SOUTH."},void 0),i("li",{children:"*SOUTH* matches all gauges whose names contain SOUTH anywhere, e.g. BERMONDSEY-SOUTHWARK-PARK, SOUTHAM, FAIR-ISLE-SOUTH."},void 0),i("li",{children:"For completeness SOUTH* matches all gauges whose names begin with SOUTH, e.g. SOUTHAM."},void 0)]},void 0),i("p",{children:["Other wildcard searches are ",i("b",{children:"not"},void 0)," supported, e.g. SO*H."]},void 0)]},void 0)}const Wr=function(t){var e=t.model;de(e);var n=e.state.name,r=(0,l.useCallback)((function(t){if(t.target instanceof HTMLInputElement){var n=t.target.value;""===n?e.clearFilter():e.setFilter(n)}}),[e]),o=(0,l.useCallback)((function(){e.clearFilter()}),[e]);return i(Br,Ur({id:"filter-name",label:"Name",model:e,info:i(Hr,{},void 0)},{children:i("div",Ur({className:"d-flex flex-column mt-3"},{children:[i("label",Ur({className:"mb-1",for:"filter-name-input"},{children:"Name"}),void 0),i(Pe,{type:"text",id:"filter-name-input",placeholder:"Gauge",onInput:r,value:n,autoComplete:"off",spellcheck:!1,handleClear:o},void 0)]}),void 0)}),void 0)};var zr=function(){return zr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},zr.apply(this,arguments)};function Kr(){return i(r.Fragment,{children:"Show all gauges with at least one associated county in the selected list."},void 0)}function $r(t){var e=t.title,n=t.handleSelectAll,r=t.handleSelectNone;return i("div",zr({className:"d-flex flex-column align-items-start"},{children:[i("div",zr({className:"fs-5"},{children:e}),void 0),i("div",zr({className:"d-flex flex-row"},{children:[i("button",zr({className:"btn btn-sm btn-link",type:"button",onClick:n},{children:"Select all"}),void 0),i("button",zr({className:"btn btn-sm btn-link",type:"button",onClick:r},{children:"Select none"}),void 0)]}),void 0)]}),void 0)}function Yr(t){var e=t.country,n=t.model,r=n.state,o=r.countriesMap,a=r.countiesFilters,c=o[e]||[],s=(0,l.useCallback)((function(){n.setCountry(e,!0)}),[e,n]),u=(0,l.useCallback)((function(){n.setCountry(e,!1)}),[e,n]);return i("div",zr({className:"mt-3"},{children:[i($r,{title:e,handleSelectAll:s,handleSelectNone:u},void 0),i("div",zr({className:"d-flex flex-column mt-1"},{children:c.map((function(t){return i("div",zr({className:"d-flex flex-row my-1"},{children:[i("input",{className:"form-check-input",type:"checkbox",checked:a[t],id:"filter-".concat(t),"data-county":t},void 0),i("label",zr({className:"form-check-label ms-2",for:"filter-".concat(t)},{children:t}),void 0)]}),t)}))}),void 0)]}),void 0)}const Zr=function(t){var e=t.model;de(e);var n=(0,l.useCallback)((function(t){var n,r=t.target;if(r.hasAttribute("data-county")){var o=null!==(n=r.getAttribute("data-county"))&&void 0!==n?n:"";e.toggleCounty(o)}}),[e]),r=(0,l.useCallback)((function(){e.setAll(!0)}),[e]),o=(0,l.useCallback)((function(){e.setAll(!1)}),[e]);return i(Br,zr({id:"filter-county",label:"County",model:e,info:i(Kr,{},void 0)},{children:i("div",zr({className:"rr-filter-county mt-3 py-3 px-3 w-100 border"},{children:[i($r,{title:"Counties",handleSelectAll:r,handleSelectNone:o},void 0),i("div",zr({className:"d-flex flex-column",onChange:n},{children:[i(Yr,{country:"England",model:e},void 0),i(Yr,{country:"Scotland",model:e},void 0),i(Yr,{country:"Wales",model:e},void 0),i(Yr,{country:"Northern Ireland",model:e},void 0),i(Yr,{country:"Republic of Ireland",model:e},void 0),i(Yr,{country:"Islands",model:e},void 0)]}),void 0)]}),void 0)}),void 0)};var qr=function(){return qr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},qr.apply(this,arguments)};function Jr(t){var e=t.id,n=t.label,r=t.unit,o=t.model;de(o);var a=o.state,c=a.startValue,s=a.minValue,u=a.maxValue,f=(0,l.useCallback)((function(t){""===t.target.value?o.setStartValue(s):o.update({})}),[o,s]),d=(0,l.useMemo)((function(){return(0,Xt.throttle)((function(t){var e=parseInt(t.target.value,10);s<=e&&e<=u&&o.setStartValue(e)}),250)}),[o,s,u]);return i("div",qr({className:"d-flex flex-column mb-2"},{children:[i("label",qr({className:"mb-1",for:"".concat(e,"-start-value")},{children:n}),void 0),i("div",qr({className:"input-group"},{children:[i("input",{className:"form-control",id:"".concat(e,"-start-value"),type:"number",placeholder:"".concat(s),value:c,min:s,max:u,onInput:d,onBlur:f},void 0),r&&i("span",qr({className:"input-group-text"},{children:r}),void 0)]}),void 0)]}),void 0)}function Xr(t){var e=t.id,n=t.label,r=t.unit,o=t.model;de(o);var a=o.state,c=a.endValue,s=a.minValue,u=a.maxValue,f=(0,l.useCallback)((function(t){""===t.target.value?o.setEndValue(u):o.update({})}),[o,u]),d=(0,l.useMemo)((function(){return(0,Xt.throttle)((function(t){var e=parseInt(t.target.value,10);s<=e&&e<=u&&o.setEndValue(e)}),250)}),[o,s,u]);return i("div",qr({className:"d-flex flex-column"},{children:[i("label",qr({className:"mb-1",for:"".concat(e,"-end-value")},{children:n}),void 0),i("div",qr({className:"input-group"},{children:[i("input",{className:"form-control",id:"".concat(e,"-end-value"),type:"number",placeholder:"".concat(u),value:c,min:s,max:u,onInput:d,onBlur:f},void 0),r&&i("span",qr({className:"input-group-text"},{children:r}),void 0)]}),void 0)]}),void 0)}function Qr(t){var e=t.id,n=t.checkLabel,r=t.startLabel,o=t.endLabel,a=t.unit,l=t.model,c=t.info;return de(l),i(Br,qr({id:e,label:n,model:l,info:c},{children:i("div",qr({className:"rr-filter-range d-flex flex-column mt-3"},{children:[i(Jr,{id:e,label:r,model:l,unit:a},void 0),i(Xr,{id:e,label:o,model:l,unit:a},void 0)]}),void 0)}),void 0)}function to(){return i(r.Fragment,{children:"Show all gauges that either fully or partially overlap the year range."},void 0)}const eo=function(t){return i(Qr,{id:"filter-year",checkLabel:"Year",startLabel:"Start",endLabel:"End",model:t.model,info:i(to,{},void 0)},void 0)};function no(){return i(r.Fragment,{children:"Show all gauges whose durations lie within the range. Duration is computed as end year - start year + 1."},void 0)}const ro=function(t){return i(Qr,{id:"filter-duration",checkLabel:"Duration",startLabel:"Min",endLabel:"Max",unit:"yr",model:t.model,info:i(no,{},void 0)},void 0)};function oo(){return i(r.Fragment,{children:"Show all gauges whose elevations lie within the range."},void 0)}const ao=function(t){return i(Qr,{id:"filter-elevation",checkLabel:"Elevation",startLabel:"Min",endLabel:"Max",unit:"ft",model:t.model,info:i(oo,{},void 0)},void 0)};var io=function(){return io=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},io.apply(this,arguments)};const lo=function(t){var e,n,r=t.id,o=t.label,a=t.unit,c=t.value,s=t.defaultValue,u=t.minValue,f=t.maxValue,d=t.className,p=t.step,h=t.setValue,v=t.resetValue,m=(0,l.useCallback)((function(t){""===t.target.value?h(null):v()}),[h,v]),g=(0,l.useMemo)((function(){return(0,Xt.throttle)((function(t){var e=t.target.valueAsNumber;u<=e&&e<=f&&h(e)}),250)}),[h,u,f]);return i("div",io({className:Lt(co||(e=["d-flex flex-column ",""],n=["d-flex flex-column ",""],Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,co=e),!!d&&d)},{children:[i("label",io({className:"mb-1",htmlFor:r},{children:o}),void 0),i("div",io({className:"input-group"},{children:[i(Ne,{className:"form-control",id:r,type:"number",value:null!=c?c:"",placeholder:"".concat(null!=s?s:""),min:u,max:f,step:p,onInput:g,onBlur:m},void 0),a&&i("span",io({className:"input-group-text"},{children:a}),void 0)]}),void 0)]}),void 0)};var co,so=function(){return so=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},so.apply(this,arguments)};const uo=function(t){var e=t.model;de(e);var n=e.state,r=n.ok,o=n.lon,a=n.lat,c=n.minLon,s=n.maxLon,u=n.midLon,f=n.minLat,d=n.maxLat,p=n.midLat,h=(0,l.useCallback)((function(t){e.setLon(t)}),[e]),v=(0,l.useCallback)((function(t){e.setLat(t)}),[e]),m=(0,l.useCallback)((function(){e.update({})}),[e]);return i("div",so({className:"d-flex flex-column"},{children:[i(lo,{id:"filter-proximity-lon",className:"mb-2",label:"Longitude",value:r?o:null,minValue:c,maxValue:s,defaultValue:u,step:.001,setValue:h,resetValue:m,unit:"°"},void 0),i(lo,{id:"filter-proximity-lat",label:"Latitude",value:r?a:null,minValue:f,maxValue:d,defaultValue:p,step:.001,setValue:v,resetValue:m,unit:"°"},void 0)]}),void 0)};var fo=function(){return fo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},fo.apply(this,arguments)};const po=function(t){var e=t.name,n=t.model,r=t.info,o=(0,l.useState)(!1),a=o[0],c=o[1];de(n);var s=n.state,u=s.gridRef,f=s.errorMessage;(0,l.useEffect)((function(){var t;return c(!1),""!==f&&(t=setTimeout((function(){c(!0)}),2e3)),function(){clearTimeout(t)}}),[u,f,c]);var d,p,h=(0,l.useCallback)((function(t){var e=t.target;n.setGridRef(e.value)}),[n]),v="filter-proximity-grid-ref-".concat(e);return i("div",fo({className:"d-flex flex-column"},{children:[i("div",fo({className:"d-flex flex-row mb-1"},{children:[i("label",fo({htmlFor:v},{children:"Grid reference"}),void 0),r&&i(He,fo({className:"ms-1 flex-grow-1"},{children:r}),void 0)]}),void 0),i(Se,{className:Lt(ho||(d=["form-control ",""],p=["form-control ",""],Object.defineProperty?Object.defineProperty(d,"raw",{value:p}):d.raw=p,ho=d),a&&"is-invalid"),id:v,type:"text",value:u,onInput:h,spellcheck:!1},void 0),i("div",fo({className:"invalid-feedback"},{children:f}),void 0)]}),void 0)};var ho,vo=function(){return vo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},vo.apply(this,arguments)};function mo(t){var e=t.activeIndex,n=t.suggestions;return i("div",vo({className:"rr-suggest-input__suggestions position-relative"},{children:i("ul",vo({className:"dropdown-menu d-block left-0 top-0 w-100 mt-1"},{children:[0===n.length&&i("li",{children:i("span",vo({className:"dropdown-item disabled"},{children:"No results"}),void 0)},void 0),n.map((function(t,n){return i("li",{children:i("a",vo({className:Lt(yo||(r=["dropdown-item text-truncate ",""],o=["dropdown-item text-truncate ",""],Object.defineProperty?Object.defineProperty(r,"raw",{value:o}):r.raw=o,yo=r),e===n&&"rr-suggest-input__suggestion-active"),href:"#","data-index":n},{children:t.text}),void 0)},n);var r,o}))]}),void 0)}),void 0)}const go=function(t){var e=t.model,n=t.id,r=t.info;de(e);var o=(0,l.useCallback)((function(){e.state.suggestions.length>0&&e.showSuggestions()}),[e]),a=(0,l.useCallback)((function(t){var n=t.relatedTarget;if(n instanceof HTMLElement&&n.hasAttribute("data-index")){var r=parseInt(n.getAttribute("data-index"),10);e.setSuggestion(r)}else e.hideSuggestions()}),[e]),c=(0,l.useCallback)((function(t){It(t.key,{ArrowUp:function(){e.previousSuggestion()},ArrowDown:function(){e.nextSuggestion()},Tab:function(){var n=e.state,r=n.suggestionsOpen,o=n.activeIndex;r&&-1!==o&&(t.preventDefault(),e.acceptCurrentSuggestion())},Enter:"Tab",default:"break"})}),[e]),s=(0,l.useCallback)((function(t){var n=t.target.value;e.setText(n)}),[e]),u=(0,l.useCallback)((function(){e.clear()}),[e]),f=e.state,d=f.suggestionsOpen,p=f.suggestions,h=f.activeIndex,v=f.text;return i("div",vo({className:"d-flex flex-column"},{children:[i("div",vo({className:"d-flex flex-row mb-1"},{children:[i("label",vo({htmlFor:n},{children:"Search"}),void 0),r&&i(He,vo({className:"ms-1 flex-grow-1"},{children:r}),void 0)]}),void 0),i(Pe,{type:"text",id:n,value:v,autoComplete:"off",spellcheck:!1,onBlur:a,onFocus:o,onKeyDown:c,onInput:s,handleClear:u},void 0),d&&i(mo,{activeIndex:h,suggestions:p},void 0)]}),void 0)};var yo,bo=function(){return bo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bo.apply(this,arguments)};const _o=function(t){var e=t.currentMode,n=t.handleModeChange,r=(0,l.useCallback)((function(t){var e=t.target.value;n(e)}),[n]);return i("div",bo({className:"d-flex flex-column"},{children:[i("label",bo({className:"mb-1",htmlFor:"filter-proximity-mode-selector"},{children:"From"}),void 0),i("select",bo({className:"form-select",id:"filter-proximity-mode-selector",value:e,onChange:r},{children:[["lonLat","Longitude/Latitude"],["gbGridRef","British grid reference"],["ireGridRef","Irish grid reference"],["place","Place"],["gauge","Gauge"]].map((function(t){var n=t[0],r=t[1];return i("option",bo({value:n,selected:n===e},{children:r}),n)}))}),void 0)]}),void 0)};function wo(t,e){var n=Ut(t);return parseFloat(n.toFixed(e))}const Oo=function(t){var e=t.model;de(e,["distance"]);var n=e.state,r=n.distance,o=n.minDistance,a=n.maxDistance,c=(0,l.useCallback)((function(t){var n=null===t?null:function(t){return t*Bt}(t);e.setDistance(n)}),[e]),s=(0,l.useCallback)((function(){e.update({})}),[e]);return i(lo,{id:"filter-postion-distance",label:"Distance",unit:"mi",value:wo(r,1),minValue:wo(o,1),maxValue:wo(a,1),defaultValue:wo(a,1),step:.1,setValue:c,resetValue:s},void 0)};var xo=function(){return xo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xo.apply(this,arguments)};function So(){return i(r.Fragment,{children:[i("p",{children:"Show all gauges within a certain distance of a geographical location. The location may be specified by:"},void 0),i("ul",{children:[i("li",{children:"A longitude/latitude pair."},void 0),i("li",{children:"A British or Irish grid reference."},void 0),i("li",{children:"A place name."},void 0),i("li",{children:"A gauge name."},void 0)]},void 0),i("p",{children:"The map displays the search area as a semi-opaque blue circle."},void 0)]},void 0)}function Co(t){var e=t.href,n=t.text;return i("a",xo({href:e,target:"_blank",rel:"noreferrer"},{children:void 0===n?e:n}),void 0)}function No(){return i(r.Fragment,{children:["A British grid reference with between 2 and 10 figures. See ",i(Co,{href:"https://en.wikipedia.org/wiki/Ordnance_Survey_National_Grid"},void 0),"."]},void 0)}function jo(){return i(r.Fragment,{children:["An Irish grid reference with between 2 and 10 figures. The grid reference may optionally begin with an 'I'. See ",i(Co,{href:"https://en.wikipedia.org/wiki/Irish_grid_reference_system"},void 0),"."]},void 0)}function Po(){return i(r.Fragment,{children:"The name of a place. Begin typing to get a list of suggestions."},void 0)}function ko(){return i(r.Fragment,{children:"The name of a gauge in the dataset. Begin typing to get a list of suggestions."},void 0)}function Eo(t){var e=t.model;de(e,["mode"]);var n=e.state.mode,r=e.children,o=r.lonLat,a=r.gbGridRef,c=r.ireGridRef,s=r.place,u=r.gauge,f=(0,l.useCallback)((function(t){e.setMode(t)}),[e]),d={lonLat:(0,l.useCallback)((function(){return i(uo,{model:o},void 0)}),[o]),gbGridRef:(0,l.useCallback)((function(){return i(po,{name:"gb",model:a,info:i(No,{},void 0)},void 0)}),[a]),ireGridRef:(0,l.useCallback)((function(){return i(po,{name:"ire",model:c,info:i(jo,{},void 0)},void 0)}),[c]),place:(0,l.useCallback)((function(){return i(go,{id:"filter-proximity-place",model:s,info:i(Po,{},void 0)},void 0)}),[s]),gauge:(0,l.useCallback)((function(){return i(go,{id:"filter-proximity-gauge",model:u,info:i(ko,{},void 0)},void 0)}),[u])};return i(Br,xo({id:"filter-position",label:"Proximity",model:e,info:i(So,{},void 0)},{children:i("div",xo({className:"rr-filter-proximity d-flex flex-column mt-3"},{children:[i(Oo,{model:e},void 0),i("div",xo({className:"mt-3"},{children:i(_o,{currentMode:n,handleModeChange:f},void 0)}),void 0),i("div",xo({className:"mt-3"},{children:i(_e,{mode:n,renderChildren:d},void 0)}),void 0)]}),void 0)}),void 0)}var Mo=function(){return Mo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Mo.apply(this,arguments)};function Ao(t){var e=t.model,n=e.children,r=n.filterName,o=n.filterCounty,a=n.filterYear,c=n.filterDuration,s=n.filterElevation,u=n.filterProximity,f=(0,l.useCallback)((function(){e.clear()}),[e]);return i("div",Mo({className:"border p-3"},{children:[i("div",Mo({className:"d-flex flex-row align-items-center"},{children:[i("div",Mo({className:"fs-4"},{children:"Filters"}),void 0),i("button",Mo({type:"button",className:"btn btn-sm btn-link ms-auto",onClick:f},{children:"Clear all"}),void 0)]}),void 0),i("div",Mo({className:"mt-3"},{children:[i(Wr,{model:r},void 0),i(Eo,{model:u},void 0),i(Zr,{model:o},void 0),i(eo,{model:a},void 0),i(ro,{model:c},void 0),i(ao,{model:s},void 0)]}),void 0)]}),void 0)}var Fo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const To=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({active:!1}),e}return Fo(e,t),e.prototype._clear=function(){},e.prototype.toggleActive=function(){var t=this.state.active;this.update({active:!t})},e.prototype.clear=function(){var t=this;this.batch((function(){t._clear(),t.update({active:!1})}))},e}(oe);var Lo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Io=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({minValue:0,maxValue:0,startValue:0,endValue:0}),e}return Lo(e,t),e.prototype._clear=function(){var t=this.state,e=t.minValue,n=t.maxValue;this.update({startValue:e,endValue:n})},e.prototype.setValues=function(t,e,n,r){this.update({minValue:t,maxValue:e,startValue:n,endValue:r})},e.prototype.setStartValue=function(t){var e=this.state,n=e.endValue,r=Dt(t,e.minValue,e.maxValue),o=Math.max(n,r);this.update({startValue:r,endValue:o})},e.prototype.setEndValue=function(t){var e=this.state,n=e.startValue,r=Dt(t,e.minValue,e.maxValue),o=Math.min(n,r);this.update({startValue:o,endValue:r})},e}(To);const Ro=Io;var Do=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Vo=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({name:""}),e}return Do(e,t),e.prototype._clear=function(){this.clearFilter()},e.prototype.setFilter=function(t){this.update({name:Gt(t)})},e.prototype.clearFilter=function(){this.update({name:""})},e}(To);var Go=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bo=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({countriesMap:{},countiesFilters:{}}),e}return Go(e,t),e.prototype._clear=function(){this.setAll(!0)},e.prototype.setData=function(t,e){var n=function(t,e){for(var n={},r=0,o=t;r<o.length;r++)n[o[r].name]=[];for(var a=0,i=e;a<i.length;a++){var l=i[a],c=l.name;n[l.country].push(c)}return n}(t,e),r=function(t){for(var e={},n=0,r=t;n<r.length;n++)e[r[n].name]=!0;return e}(e);this.update({countriesMap:n,countiesFilters:r})},e.prototype.toggleCounty=function(t){var e=this.state.countiesFilters;e[t]=!e[t],this.update({countiesFilters:e})},e.prototype.setCountry=function(t,e){for(var n=this.state,r=n.countriesMap,o=n.countiesFilters,a=0,i=r[t];a<i.length;a++)o[i[a]]=e;this.update({countiesFilters:o})},e.prototype.setAll=function(t){var e=this.state.countiesFilters;for(var n in e)e[n]=t;this.update({countiesFilters:e})},e}(To);const Uo=Bo,Ho=proj4;var Wo=t.n(Ho);Wo().defs("EPSG:27700","+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +units=m +no_defs");var zo=[[0,0],[699999.9,1299999.9]];function Ko(t,e){var n=zo[0],r=n[0],o=n[1],a=zo[1],i=a[0],l=a[1];return!(t<r||t>i||e<o||e>l)}function $o(t){return t.trim().toUpperCase().replace(/ /g,"")}function Yo(t){var e=$o(t),n=/^[THJONS][VWXYZQRSTULMNOPFGHJKABCDE] ?[0-9]{1,5} ?[0-9]{1,5}$/.test(e),r=e.length%2==0;return n&&r}function Zo(t,e,n){void 0===n&&(n=7);var r=Wo()("EPSG:27700","EPSG:4326",[t,e]);return[Number(r[0].toFixed(n)),Number(r[1].toFixed(n))]}function qo(t){var e="VWXYZQRSTULMNOPFGHJKABCDE",n=$o(t),r=e.indexOf(n[0]),o=e.indexOf(n[1]),a=r%5*5e5-1e6,i=5e5*Math.floor(r/5)-5e5,l=o%5*1e5,c=1e5*Math.floor(o/5),s=(n.length-2)/2,u=Math.pow(10,5-s);return[a+l+u*Number(n.slice(2,s+2)),i+c+u*Number(n.slice(s+2))]}Wo().defs("EPSG:29903","+proj=tmerc +lat_0=53.5 +lon_0=-8 +k=1.000035 +x_0=200000 +y_0=250000 +a=6377340.189 +rf=299.3249646 +units=m +no_defs");var Jo=[[0,0],[399999.9,499999.9]];function Xo(t,e){var n=Jo[0],r=n[0],o=n[1],a=Jo[1],i=a[0],l=a[1];return!(t<r||t>i||e<o||e>l)}function Qo(t){return t.trim().toUpperCase().replace("I","").replace(/ /g,"")}function ta(t){var e=Qo(t),n=/^[VWXYZQRSTULMNOPFGHJKABCDE] ?[0-9]{1,5} ?[0-9]{1,5}$/.test(e),r=e.length%2==1;return n&&r}function ea(t,e,n){void 0===n&&(n=7);var r=Wo()("EPSG:29903","EPSG:4326",[t,e]);return[Number(r[0].toFixed(n)),Number(r[1].toFixed(n))]}function na(t){var e=Qo(t),n="VWXYZQRSTULMNOPFGHJKABCDE".indexOf(e[0]),r=n%5*1e5,o=1e5*Math.floor(n/5),a=(e.length-1)/2,i=Math.pow(10,5-a);return[r+i*Number(e.slice(1,a+1)),o+i*Number(e.slice(a+1))]}const ra=arcgisRest;var oa=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function l(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((r=r.apply(t,e||[])).next())}))},aa=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ia=Ct.mapping.esriApiKey,la=function(){function t(t){this.searchExtent=t.join(","),this.fetch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return fetch.apply(void 0,t)}}return t.prototype.suggest=function(t){return oa(this,void 0,void 0,(function(){return aa(this,(function(e){switch(e.label){case 0:return[4,(0,ra.request)("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/suggest",{authentication:new ra.ApiKey({key:ia}),params:{text:t,searchExtent:this.searchExtent,category:"Populated Place"},fetch:this.fetch})];case 1:return[2,e.sent().suggestions.map((function(t){return{text:t.text,magicKey:t.magicKey}}))]}}))}))},t.prototype.geocode=function(t,e){return oa(this,void 0,void 0,(function(){return aa(this,(function(n){switch(n.label){case 0:return[4,(0,ra.request)("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates",{authentication:new ra.ApiKey({key:ia}),params:{SingleLine:t,magicKey:e.magicKey,searchExtent:this.searchExtent},fetch:this.fetch})];case 1:return[2,{candidates:n.sent().candidates.map((function(t){return{address:t.address,location:t.location,extent:t.extent}}))}]}}))}))},t}(),ca=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const sa=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({ok:!1,lon:0,lat:0}),e}return ca(e,t),e.prototype.clear=function(){},e}(oe);var ua=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fa=function(t){function e(e){var n=t.call(this)||this,r=e[0],o=r[0],a=r[1],i=e[1],l=i[0],c=i[1],s=(l+o)/2,u=(c+a)/2,f={ok:!0,lon:s,lat:u,minLon:o,maxLon:l,midLon:s,minLat:a,maxLat:c,midLat:u};return n.assignInitialState(f),n}return ua(e,t),e.prototype.setLon=function(t){this.update({lon:null===t?this.state.midLon:t})},e.prototype.setLat=function(t){this.update({lat:null===t?this.state.midLat:t})},e.prototype.clear=function(){var t=this.state,e=t.midLon,n=t.midLat;this.update({lon:e,lat:n})},e}(sa);const da=fa;var pa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ha=function(){return ha=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ha.apply(this,arguments)},va=function(t){function e(e){var n=e.validateGridRef,r=e.checkBounds,o=e.en2LonLat,a=e.gridRef2en,i=t.call(this)||this;return i.validateGridRef=n,i.checkBounds=r,i.en2LonLat=o,i.gridRef2en=a,i.assignInitialState({ok:!1,gridRef:"",errorMessage:""}),i}return pa(e,t),e.prototype.setGridRef=function(t){if(""===t)this.update(ha({},this.initialState));else if(this.validateGridRef(t)){var e=this.gridRef2en(t),n=e[0],r=e[1];if(this.checkBounds(n,r)){var o=this.en2LonLat(n,r),a=o[0],i=o[1];this.update({gridRef:t,ok:!0,lon:a,lat:i,errorMessage:""})}else this.update(ha(ha({},this.initialState),{gridRef:t,errorMessage:"Grid reference out of bounds"}))}else this.update(ha(ha({},this.initialState),{gridRef:t,errorMessage:"Invalid grid reference"}))},e.prototype.clear=function(){this.update(this.initialState)},e}(sa);const ma=va;var ga=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ya=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function l(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((r=r.apply(t,e||[])).next())}))},ba=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},_a=function(t){function e(e){void 0===e&&(e={});var n=this,r=e.searchThreshold,o=void 0===r?0:r,a=e.maxSuggestions,i={ok:!1,lon:0,lat:0,suggestionsOpen:!1,suggestions:[],activeIndex:-1,text:"",searchThreshold:o,maxSuggestions:void 0===a?1/0:a};return(n=t.call(this)||this).assignInitialState(i),n}return ga(e,t),e.prototype._getSuggestions=function(t){return ya(this,void 0,void 0,(function(){return ba(this,(function(t){return[2,[]]}))}))},e.prototype._getTarget=function(t){return ya(this,void 0,void 0,(function(){return ba(this,(function(t){return[2,null]}))}))},e.prototype.showSuggestions=function(){this.update({suggestionsOpen:!0})},e.prototype.hideSuggestions=function(){this.update({suggestionsOpen:!1})},e.prototype.nextSuggestion=function(){var t=this.state,e=t.suggestions,n=t.activeIndex;this.update({activeIndex:(n+1)%e.length})},e.prototype.previousSuggestion=function(){var t=this.state,e=t.suggestions,n=t.activeIndex;this.update({activeIndex:0===n?e.length-1:n-1})},e.prototype.clear=function(){this.update(this.initialState)},e.prototype.setText=function(t){var e=this;return this.batchAsync((function(){return ya(e,void 0,void 0,(function(){var e,n,r,o,a;return ba(this,(function(i){switch(i.label){case 0:if(e=this.state,n=e.searchThreshold,r=e.maxSuggestions,this.update({text:t,suggestionsOpen:t.length>=n}),!(t.length>=n))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._getSuggestions(t)];case 2:return o=i.sent(),this.setSuggestions(o.slice(0,r)),[3,4];case 3:return a=i.sent(),console.error(a),[3,4];case 4:return[2]}}))}))}))},e.prototype.setSuggestions=function(t){this.update({activeIndex:0===t.length?-1:0,suggestions:t})},e.prototype.acceptCurrentSuggestion=function(){return ya(this,void 0,void 0,(function(){var t;return ba(this,(function(e){return t=this.state.activeIndex,[2,this.setSuggestion(t)]}))}))},e.prototype.setSuggestion=function(t){return ya(this,void 0,void 0,(function(){var e,n,r,o,a,i;return ba(this,(function(l){switch(l.label){case 0:e=this.state.suggestions,n=e[t].text,this.update({activeIndex:t,text:n,suggestionsOpen:!1}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this._getTarget(t)];case 2:return null===(r=l.sent())?this.update({ok:!1,lat:0,lon:0}):(o=r.lon,a=r.lat,this.update({ok:!0,lon:o,lat:a})),[3,4];case 3:return i=l.sent(),console.error(i),[3,4];case 4:return[2]}}))}))},e}(sa);const wa=_a;var Oa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xa=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function l(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((r=r.apply(t,e||[])).next())}))},Sa=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ca=function(t){function e(e){var n=t.call(this,{searchThreshold:3,maxSuggestions:5})||this;return n.api=e,n.assignInitialState({target:null}),n}return Oa(e,t),e.prototype._getSuggestions=function(t){return xa(this,void 0,void 0,(function(){return Sa(this,(function(e){return[2,this.api.suggest(t)]}))}))},e.prototype._getTarget=function(t){return xa(this,void 0,void 0,(function(){var e,n,r,o,a,i,l,c,s;return Sa(this,(function(u){switch(u.label){case 0:return e=this.state.suggestions,n=e[t],r=n.text,o=n.magicKey,[4,this.api.geocode(r,{magicKey:o})];case 1:return a=u.sent(),i=0===a.candidates.length?null:a.candidates[0],this.update({target:i}),null===i?[2,null]:(l=i.location,c=l.x,s=l.y,[2,{text:i.address,lon:c,lat:s}])}}))}))},e}(wa);const Na=Ca;var ja=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pa=function(){return Pa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Pa.apply(this,arguments)},ka=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function l(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,l)}c((r=r.apply(t,e||[])).next())}))},Ea=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function Ma(t,e){return t.filter((function(t){return t.text.startsWith(e)}))}const Aa=function(t){function e(){var e=t.call(this,{searchThreshold:3,maxSuggestions:5})||this;return e.assignInitialState({gaugeSuggestions:[]}),e}return ja(e,t),e.prototype._getSuggestions=function(t){return ka(this,void 0,void 0,(function(){return Ea(this,(function(e){return[2,Ma(this.state.gaugeSuggestions,t)]}))}))},e.prototype._getTarget=function(t){return ka(this,void 0,void 0,(function(){return Ea(this,(function(e){return[2,this.state.suggestions[t]]}))}))},e.prototype.clear=function(){var t=this.state.gaugeSuggestions;this.update(Pa(Pa({},this.initialState),{gaugeSuggestions:t}))},e.prototype.setText=function(e){return t.prototype.setText.call(this,Gt(e))},e.prototype.setData=function(t){this.update({gaugeSuggestions:t})},e}(wa);var Fa=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ta=function(t){function r(r,o){var a=t.call(this)||this;a.addChild("lonLat",new da(r)),a.addChild("gbGridRef",new ma(e)),a.addChild("ireGridRef",new ma(n)),a.addChild("place",new Na(new la(r))),a.addChild("gauge",new Aa);var i="lonLat",l=a._getModeChild(i).state,c={ok:l.ok,mode:i,lon:l.lon,lat:l.lat,distance:o,minDistance:0,maxDistance:o};return a.assignInitialState(c),a}return Fa(r,t),r.prototype._clear=function(){var t=this;this.batch((function(){for(var e in t.update(t.initialState),t.children)t.children[e].clear()}))},r.prototype._getModeChild=function(t){return this.getChild(t)},r.prototype.onChanges=function(t){var e=this.state.mode;if((0,Xt.has)(t,e)){var n=t[e];if(["ok","lat","lon"].some((function(t){return(0,Xt.has)(n,t)}))){var r=this._getModeChild(e).state,o=r.ok,a=r.lon,i=r.lat;this.update({ok:o,lon:a,lat:i})}}},r.prototype.setMode=function(t){var e=this._getModeChild(t).state,n=e.ok,r=e.lon,o=e.lat;this.update({mode:t,ok:n,lon:r,lat:o})},r.prototype.setDistance=function(t){this.update({distance:null===t?this.state.maxDistance:t})},r.prototype.setData=function(t){var e=this;this.batch((function(){e._clear(),e.children.gauge.setData(t)}))},r}(To);const La=Ta;var Ia=function(){function t(){this.min=1/0,this.max=-1/0}return Object.defineProperty(t.prototype,"range",{get:function(){return[this.min,this.max]},enumerable:!1,configurable:!0}),t.prototype.update=function(t,e){void 0===e&&(e=t),this.min=Math.min(this.min,t),this.max=Math.max(this.max,e)},t}(),Ra=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Da=function(t){function e(){var e=t.call(this)||this;e.addChild("filterName",new Vo),e.addChild("filterCounty",new Uo),e.addChild("filterYear",new Ro),e.addChild("filterElevation",new Ro),e.addChild("filterDuration",new Ro);var n=Ct.mapping.gaugesMap,r=n.bounds,o=n.radius;return e.addChild("filterProximity",new La(r,o)),e}return Ra(e,t),e.prototype.setData=function(t){var e=this.children,n=e.filterName,r=e.filterYear,o=e.filterElevation,a=e.filterDuration,i=e.filterCounty,l=e.filterProximity,c=function(t){for(var e=new Ia,n=new Ia,r=new Ia,o=0,a=t.gauges;o<a.length;o++){var i=a[o],l=i.startYear,c=i.endYear,s=i.elevation;e.update(l,c),null!==s&&n.update(s),r.update(c-l+1)}return[e.range,n.range,r.range]}(t),s=c[0],u=s[0],f=s[1],d=c[1],p=d[0],h=d[1],v=c[2],m=v[0],g=v[1],y=t.gauges.map((function(t){return{text:t.name,lon:t.lon,lat:t.lat}})),b=t.countries,_=t.counties;this.batch((function(){n.clearFilter(),r.setValues(u,f,u,f),o.setValues(p,h,p,h),a.setValues(m,g,m,g),i.setData(b,_),l.setData(y)}))},e.prototype.clear=function(){var t=this;this.batch((function(){for(var e in t.children)t.children[e].clear()}))},e}(oe);const Va=Da,Ga=maplibregl;var Ba=t.n(Ga),Ua=Ct.mapping.esriApiKey;function Ha(t){var e=new Blob,n=URL.createObjectURL(e),r=/tile\/(\d+)\/(\d+)\/(\d+)\.pbf/;return function(e){var o=r.exec(e);if(null===o)return{url:e};var a=parseInt(o[1],10),i=parseInt(o[2],10),l=parseInt(o[3],10),c=lr(l,a),s=lr(l+1,a),u=cr(i,a),f=cr(i+1,a);return c>t[1][0]||s<t[0][0]||f>t[1][1]||u<t[0][1]?{url:n}:{url:e}}}var Wa=function(){return Wa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Wa.apply(this,arguments)};function za(){return i(r.Fragment,{children:"Show nearby gauges as clusters rather than individually. The number of gauges in the cluster is shown in the centre of the icon. Click the icon to zoom-into the cluster."},void 0)}const Ka=function(t){var e=t.model,n=(0,l.useCallback)((function(){e.toggleClusterGauges()}),[e]),r=e.state.clusterGauges;return i("div",Wa({className:"d-flex flex-row mb-3 align-items-center"},{children:[i("input",{className:"form-check-input",type:"checkbox",checked:r,id:"cluster-gauges",onChange:n},void 0),i("label",Wa({className:"form-check-label ms-2",for:"cluster-gauges"},{children:"Cluster gauges"}),void 0),i(He,Wa({className:"ms-1"},{children:i(za,{},void 0)}),void 0)]}),void 0)};var $a=function(){return $a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},$a.apply(this,arguments)};const Ya=function(t){var e=t.map,n=(0,l.useState)(0),r=n[0],o=n[1];return(0,l.useEffect)((function(){e.on("zoom",(function(){o(Math.round(e.getZoom()))})),o(Math.round(e.getZoom()))}),[o,e]),i("div",$a({className:"rr-map__zoom-level",title:"Zoom level"},{children:r}),void 0)};var Za=function(){function t(t){this._$el=null,this.setElement=t}return t.prototype.onAdd=function(){var t=document.createElement("div");return t.className="maplibregl-ctrl maplibregl-ctrl-group",this._$el=t,this.setElement(t),t},t.prototype.onRemove=function(){var t=this._$el;null!==t&&((0,we.unmountComponentAtNode)(t),t.remove(),this._$el=null,this.setElement(null))},t}();const qa=function(t){var e=t.map,n=t.position,r=t.children,a=(0,l.useState)(null),c=a[0],s=a[1],u=(0,l.useMemo)((function(){return new Za(s)}),[s]);return(0,l.useEffect)((function(){e.addControl(u,n)}),[e,u,n]),i(o().Fragment,{children:null!==c&&(0,we.createPortal)(r,c)},void 0)};var Ja=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const Xa=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({popups:[]}),e}return Ja(e,t),e.prototype.addPopup=function(t,e,n,r){var o=this.state.popups;o.push({$container:t,instance:e,coordinates:n,features:r}),this.update({popups:o})},e.prototype.removePopup=function(t){var e=this.state.popups;this.update({popups:e.filter((function(e){return e.instance!==t}))})},e}(oe);var Qa=function(){return Qa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Qa.apply(this,arguments)},ti=/^[A-Z-]+-(\d+)$/;function ei(t){var e=t.features;return i("div",Qa({className:"overflow-auto"},{children:i("ul",Qa({className:"rr-single-gauge-list"},{children:e.map((function(t){var e=t.id,n=t.properties;return i("li",Qa({className:"rr-single-gauge-list__item"},{children:i(wt,Qa({to:n.url,target:"_blank",rel:"noreferrer"},{children:[i(Be,{className:"me-1",width:"16",height:"16"},void 0),n.name]}),void 0)}),e)}))}),void 0)}),void 0)}const ni=function(t){var e=t.map,n=t.filter,r=(0,l.useMemo)((function(){return new Xa}),[]);de(r);var a=(0,l.useCallback)((function(t,n){var o=document.createElement("div"),a=new Ga.Popup({maxWidth:"none",closeButton:!1}).setLngLat(t).setDOMContent(o);a.on("open",(function(){r.addPopup(o,a,t,n)})),a.on("close",(function(){(0,we.unmountComponentAtNode)(o),r.removePopup(a)})),a.addTo(e)}),[e,r]);(0,l.useEffect)((function(){!function(t,e){t.addLayer({id:"gauges-single",type:"circle",source:"gauges",paint:{"circle-color":"#f00","circle-radius":["case",["boolean",["feature-state","hover"],!1],6,4]}}),t.on("click","gauges-single",(function(t){if(t.features){var n=t.features;Rt(n,(function(t){var e,n;return e=t.properties.name,(n=ti.exec(e))?"".concat(n[1]," ").concat(e):"1 ".concat(e)}));var r=n[0].geometry.coordinates.slice();e(r,n)}}));var n=null;t.on("mouseenter","gauges-single",(function(){t.getCanvas().style.cursor="pointer"})),t.on("mousemove","gauges-single",(function(e){if(e.features&&0!==e.features.length){var r=e.features[0];null!==n&&t.setFeatureState({source:"gauges",id:n},{hover:!1}),n=r.id,t.setFeatureState({source:"gauges",id:n},{hover:!0})}})),t.on("mouseleave","gauges-single",(function(){t.getCanvas().style.cursor="",null!==n&&t.setFeatureState({source:"gauges",id:n},{hover:!1}),n=null}))}(e,a)}),[e,a]),(0,l.useEffect)((function(){r.state.popups.slice().forEach((function(t){t.instance.remove()}));var t=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}(["all",["!",["has","point_count"]]],n,!0);e.setFilter("gauges-single",t)}),[e,n,r]);var c=r.state.popups;return i(o().Fragment,{children:c.map((function(t){var e=t.$container,n=t.features;return(0,we.createPortal)(i(ei,{features:n},void 0),e)}))},void 0)};const ri=function(t){var e=t.map,n=t.clusterGauges,r=t.filter;return(0,l.useEffect)((function(){!function(t){for(var e=function(e,n){var r=function(t){return'<svg width="32" height="32" viewBox="0 0 32 32" fill="'.concat(t,'" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="16" cy="16" r="16" fill="#fff" />\n            <path d="M15.327 2.234c-3.285-.119-6.357 2.365-7.78 6.528-3.079 1.102-5.084 3.033-5.467 5.318-.416 2.484.825 4.87 2.8 6.346a1.683 1.683 0 0 0 2.353-.34 1.683 1.683 0 0 0-.34-2.352c-1.115-.834-1.661-2.08-1.49-3.099.17-1.018.97-2.208 3.752-2.999a1.684 1.684 0 0 0 1.168-1.217c.925-3.728 2.995-4.89 4.888-4.822 1.893.068 3.926 1.494 4.598 4.672a1.684 1.684 0 0 0 1.623 1.334c2.1.026 3.377.545 4.118 1.152.74.607 1.034 1.32 1.077 2.12.086 1.6-1.083 3.342-2.75 3.58a1.683 1.683 0 0 0-1.426 1.905 1.683 1.683 0 0 0 1.898 1.433c3.565-.507 5.819-3.812 5.641-7.1a6.316 6.316 0 0 0-2.311-4.54c-1.214-.994-3.103-1.38-5.136-1.59-1.232-3.697-4.002-6.214-7.216-6.33Z"/>\n            <path d="M10.041 21.346a1.683 1.683 0 0 0-2.037 1.226l-.464 1.88a1.683 1.683 0 0 0 1.226 2.038 1.683 1.683 0 0 0 2.038-1.226l.464-1.88a1.683 1.683 0 0 0-1.227-2.038ZM13.902 24.577a1.683 1.683 0 0 0-2.038 1.226l-.472 1.88a1.683 1.683 0 0 0 1.234 2.038 1.683 1.683 0 0 0 2.038-1.226l.464-1.88a1.683 1.683 0 0 0-1.226-2.038zM19.519 21.362a1.683 1.683 0 0 0-2.046 1.235l-.464 1.88a1.683 1.683 0 0 0 1.226 2.038 1.683 1.683 0 0 0 2.046-1.234l.464-1.873a1.683 1.683 0 0 0-1.226-2.046z"/>\n        </svg>')}(n),o=e[0],a=e[1],i=new Image(o,a);i.onload=function(){t.addImage("rain-gauge-icon-".concat(o,"-").concat(a),i)},i.src="data:image/svg+xml;base64,".concat(btoa(r))},n=0,r=[{size:[32,32],fillColor:"#51bbd6"},{size:[48,48],fillColor:"#62b856"},{size:[64,64],fillColor:"#f28cb1"},{size:[72,72],fillColor:"#f2c44e"}];n<r.length;n++){var o=r[n];e(o.size,o.fillColor)}}(e),function(t){t.addLayer({id:"gauges-clusters",type:"symbol",source:"gauges",filter:["has","point_count"],layout:{"icon-ignore-placement":!0,"icon-image":["step",["get","point_count"],"rain-gauge-icon-32-32",10,"rain-gauge-icon-48-48",100,"rain-gauge-icon-64-64",1e3,"rain-gauge-icon-72-72"],"text-field":"{point_count}","text-font":["Arial Regular"],"text-size":12,"text-anchor":"center","text-offset":[-.1,0]},paint:{"text-color":"#000"}}),t.on("click","gauges-clusters",(function(e){var n=e.features;if(n&&0!==n.length){var r=n[0],o=r.properties.cluster_id;t.getSource("gauges").getClusterExpansionZoom(o,(function(e,n){e||t.easeTo({center:r.geometry.coordinates,zoom:n})}))}})),t.on("mouseenter","gauges-clusters",(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave","gauges-clusters",(function(){t.getCanvas().style.cursor=""}))}(e)}),[e]),(0,l.useEffect)((function(){var t=e.getStyle();t.sources&&"gauges"in t.sources&&(t.sources.gauges.cluster=n,e.setStyle(t))}),[e,n]),(0,l.useEffect)((function(){var t=e.getStyle();n&&t.sources&&"gauges"in t.sources&&(t.sources.gauges.filter=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}(["all"],r,!0),e.setStyle(t))}),[n,r,e]),null};function oi(t){return{type:"Feature",geometry:{type:"Polygon",coordinates:t},properties:{}}}function ai(t){return{type:"Feature",geometry:{type:"MultiPoint",coordinates:t},properties:{}}}const ii=function(t){var e=t.map,n=t.filterProximity,r=n.active,o=n.ok,a=n.lon,i=n.lat,c=n.distance;return(0,l.useEffect)((function(){!function(t){t.addSource("filter-position-center",{type:"geojson",data:ai([])}),t.addSource("filter-position-locus",{type:"geojson",data:oi([])}),t.addLayer({id:"filter-position-center",type:"circle",source:"filter-position-center",paint:{"circle-color":"#0000ff","circle-radius":4}}),t.addLayer({id:"filter-position-locus",type:"fill",source:"filter-position-locus",paint:{"fill-color":"#0000ff","fill-opacity":.1}})}(e)}),[e]),(0,l.useEffect)((function(){r&&o?function(t,e,n,r){var o=r.getSource("filter-position-center"),a=ai([[t,e]]);o.setData(a);for(var i=[],l=0;l<100;l++){var c=2*l*Math.PI/100;i.push(ir(t,e,n,c))}i.push(i[0]),o=r.getSource("filter-position-locus");var s=oi([i]);o.setData(s)}(a,i,c,e):function(t){var e=t.getSource("filter-position-center");e.setData(ai([])),(e=t.getSource("filter-position-locus")).setData(oi([]))}(e)}),[r,o,a,i,c,e]),null};var li=function(){return li=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},li.apply(this,arguments)};function ci(){return i("svg",li({xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",fill:"currentColor",viewBox:"0 0 16 16"},{children:[i("path",{d:"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"},void 0),i("path",{d:"M5.5 5.6 a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"},void 0),i("path",{d:"M10 4.2 a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"},void 0),i("path",{d:"M7.2 11 a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"},void 0),i("path",{d:"M13.9 12.1 a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"},void 0)]}),void 0)}const si=function(t){var e=t.model,n=t.map,r=(0,l.useCallback)((function(){var t=e.getGaugeBounds();null!==t&&n.fitBounds(t,{padding:25,maxZoom:16})}),[e,n]);return i("button",li({type:"button",title:"Fit to gauges",onClick:r},{children:i(ci,{},void 0)}),void 0)};var ui=function(){return ui=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ui.apply(this,arguments)};const fi=function(t){var e=t.model,n=Zt(),o=n[0],a=n[1],c=(0,l.useState)(!1),s=c[0],u=c[1],f=(0,l.useRef)(null);de(e),(0,l.useEffect)((function(){if(null!==o){var t=e.state,n=t.bounds,r=t.data,a=function(t,e){var n=new(Ba().Map)({container:t,style:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/".concat("ArcGIS:Streets","?type=style&token=").concat(Ua),bounds:e,transformRequest:Ha(e),customAttribution:"Powered by Esri"});return n.addControl(new(Ba().NavigationControl)({showCompass:!1})),n.scrollZoom.setWheelZoomRate(.01),n}(o,n);a.once("load",(function(){a.addSource("gauges",r),u(!0)})),f.current=a;var i=new ResizeObserver((function(){a.resize()}));return i.observe(o),function(){var t=a.getBounds().toArray();e.setBounds(t),i.disconnect(),a.remove()}}}),[o,f,e,u]);var d=f.current,p=e.state,h=p.filter,v=p.filterProximity,m=e.children.mapControls,g=m.state.clusterGauges;return i("div",ui({className:"rr-gauges-map"},{children:[i("div",ui({className:"position-relative bg-light"},{children:[i("div",{className:"rr-map__container",style:{height:"80vh"},ref:a},void 0),null!==d&&s&&i(r.Fragment,{children:[i(qa,ui({map:d,position:"top-right"},{children:i(si,{map:d,model:e},void 0)}),void 0),i(ii,{map:d,filterProximity:v},void 0),i(ni,{map:d,filter:h},void 0),i(ri,{map:d,filter:h,clusterGauges:g},void 0),i(Ya,{map:d},void 0)]},void 0)]}),void 0),i(Ka,{model:m},void 0)]}),void 0)};var di=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const pi=function(t){function e(e){var n=t.call(this)||this,r={clusterGauges:e};return n.assignInitialState(r),n}return di(e,t),e.prototype.toggleClusterGauges=function(){var t=this.state.clusterGauges;this.update({clusterGauges:!t})},e}(oe);function hi(t,e,n,r){return["!",["any",["<",["get",n],e],[">",["get",t],r]]]}var vi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function mi(t,e){return{type:"geojson",data:{type:"FeatureCollection",features:t.gauges.map((function(t){return{type:"Feature",properties:t,geometry:{type:"Point",coordinates:[t.lon,t.lat]}}}))},cluster:e,clusterRadius:50,clusterMaxZoom:18,promoteId:"name"}}var gi=function(t){function e(e){var n=e.clusterGauges,r=e.getGaugeBounds,o=t.call(this)||this;o.getGaugeBounds=r;var a={bounds:Ct.mapping.gaugesMap.bounds,data:{type:"geojson",data:{type:"FeatureCollection",features:[]}},filter:[],filterProximity:{active:!1,ok:!1,lon:0,lat:0,distance:0}};return o.assignInitialState(a),o.addChild("mapControls",new pi(n)),o}return vi(e,t),e.prototype.setBounds=function(t){this.update({bounds:t})},e.prototype.setData=function(t){var e=this.children.mapControls.state.clusterGauges;this.update({data:mi(t,e)})},e.prototype.setFilter=function(t){var e=this.state,n=e.filter,r=e.filterProximity,o=function(t){var e,n=t.filterName,r=t.filterCounty,o=t.filterYear,a=t.filterDuration,i=t.filterElevation,l=t.filterProximity,c=[];if(n.active&&c.push((e=n.name).startsWith("*")?e.endsWith("*")?["in",e.slice(1,-1),["get","name"]]:["let","start",["-",["length",["get","name"]],e.length-1],["all",["<=",0,["var","start"]],["<=",0,["index-of",e.slice(1),["get","name"],["var","start"]]]]]:e.endsWith("*")?["==",["index-of",e.slice(0,-1),["get","name"]],0]:["==",["index-of",e,["get","name"]],0]),r.active){var s=r.countiesFilters;c.push(function(t){var e=[];for(var n in t)t[n]&&e.push(n);return["let","counties",["get","counties"],["case",["==",["length",["var","counties"]],1],["in",["at",0,["var","counties"]],["literal",e]],["==",["length",["var","counties"]],2],["any",["in",["at",0,["var","counties"]],["literal",e]],["in",["at",1,["var","counties"]],["literal",e]]],!1]]}(s))}if(o.active&&c.push(hi("startYear",o.startValue,"endYear",o.endValue)),a.active&&c.push(hi("duration",a.startValue,"duration",a.endValue)),i.active&&c.push(["all",["!=",["get","elevation"],null],hi("elevation",i.startValue,"elevation",i.endValue)]),l.active&&l.ok){var u=l.lon,f=l.lat,d=l.distance;c.push(function(t,e,n){var r=Math.pow(180*n/(6378137*Math.PI),2);return["<=",["+",["^",["-",["get","lat"],e],2],["^",["*",["-",["get","lon"],t],["cos",["*",Math.PI/360,["+",["get","lat"],e]]]],2]],r]}(u,f,d))}return c}(t),a=function(t){var e=t.filterProximity;return{active:e.active,ok:e.ok,lon:e.lon,lat:e.lat,distance:e.distance}}(t);(0,Xt.isEqual)(n,o)&&(0,Xt.isEqual)(r,a)||this.update({filter:o,filterProximity:a})},e}(oe);const yi=gi;var bi=function(){return bi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bi.apply(this,arguments)};const _i=function(t){var e=t.model;de(e);var n=e.children.table,r=n.state,o=r.columns,a=r.currentPage,c=r.pageCount,s=r.maxItemCount,u=r.fieldSorts,f=n.getFilteredData(),d=(0,l.useCallback)((function(t){n.navigate(t)}),[n]),p=(0,l.useCallback)((function(t){n.toggleSort(t)}),[n]);return i("div",{children:[i("div",bi({className:"rr-gauges-table__wrapper"},{children:i(kn,{className:"table-striped table-bordered rr-gauges-table",columns:o,data:f,fieldSorts:u,handleSort:p},void 0)}),void 0),i(yn,{pageCount:c,currentPage:a,maxItemCount:s,handleNavigate:d},void 0)]},void 0)};var wi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oi=[{field:"name",title:"Gauge",format:"link",frozen:!0,formatParams:{urlField:"url"},sortable:!0,className:"rr-gauges-table__name"},{field:"counties",title:"County",format:"custom",formatParams:{formatter:function(t){return t.join(", ")}},sortable:!0,sortKey:function(t){return t.join(" ")},className:"rr-gauges-table__counties"},{field:"startYear",title:"Start year",format:"text",sortable:!0,className:"rr-gauges-table__start-year"},{field:"endYear",title:"End year",format:"text",sortable:!0,className:"rr-gauges-table__end-year"},{field:"elevation",title:"Elevation (ft)",format:"custom",sortable:!0,sortKey:function(t){return null===t?-1:t},formatParams:{formatter:function(t){return null===t?"":"".concat(t)}},className:"rr-gauges-table__elevation"},{field:"distance",title:"Distance (mi)",format:"custom",sortable:!0,formatParams:{formatter:function(t){if(null===t)return"";var e=Ut(t);return"".concat(parseFloat(e.toPrecision(3)))}},className:"rr-gauges-table__distance"}];function xi(t){var e=new Set;for(var n in t)t[n]&&e.add(n);return e}function Si(t){var e=t.filterName,n=t.filterCounty,r=t.filterDuration,o=t.filterElevation,a=t.filterYear,i=t.filterProximity;return{name:e.active?Ln(e.name):null,counties:n.active?{anyIn:xi(n.countiesFilters)}:null,url:null,lon:null,lat:null,elevation:o.active?{greaterThanEqual:o.startValue,lessThanEqual:o.endValue}:null,startYear:a.active?{lessThanEqual:a.endValue}:null,endYear:a.active?{greaterThanEqual:a.startValue}:null,duration:r.active?{greaterThanEqual:r.startValue,lessThanEqual:r.endValue}:null,distance:i.active&&i.ok?{lessThanEqual:i.distance}:null}}function Ci(t,e,n){for(var r=0,o=n;r<o.length;r++){var a=o[r],i=a.lon,l=a.lat;a.distance=null!==i?ar(i,l,t,e):null}}const Ni=function(t){function e(){var e=t.call(this)||this;return e.assignInitialState({previousFilterProximity:{active:!1,ok:!1,lon:0,lat:0,distance:0}}),e.addChild("table",new Gn(Oi,10,3)),e}return wi(e,t),e.prototype.setData=function(t){var e=this,n=t.gauges,r=this.state.previousFilterProximity,o=r.active,a=r.ok;this.batch((function(){o&&a&&Ci(r.lon,r.lat,n),e.children.table.setData(n)}))},e.prototype.setFilter=function(t){var e=this,n=t.filterProximity,r=this.state.previousFilterProximity,o=this.children.table,a=o.state.data,i=r.active&&r.ok,l=n.active&&n.ok;this.batch((function(){if(!i&&l){Ci(n.lon,n.lat,a);var c=Si(t);o.setDataAndFilters(a,c)}else if(i&&!l)!function(t){for(var e=0,n=t;e<n.length;e++)n[e].distance=null}(a),c=Si(t),o.setDataAndFilters(a,c);else if(i&&l){var s=r.lon,u=r.lat,f=r.distance,d=n.lon,p=n.lat,h=n.distance;c=Si(t),d!==s||p!==u||h!==f?(Ci(d,p,a),o.setDataAndFilters(a,c)):o.setFilters(c)}else c=Si(t),o.setFilters(c);var v=n.active,m=n.ok,g=n.lon,y=n.lat,b=n.distance;e.update({previousFilterProximity:{active:v,ok:m,lon:g,lat:y,distance:b}})}))},e.prototype.getRowCount=function(){return this.children.table.getRowCount()},e.prototype.getDataBounds=function(){return function(t){if(0===t.length)return null;if(1===t.length)return[[l=t[0].lon,c=t[0].lat],[l,c]];for(var e=1/0,n=-1/0,r=1/0,o=-1/0,a=0,i=t;a<i.length;a++){var l,c,s=i[a];(l=s.lon)<e?e=l:l>n&&(n=l),(c=s.lat)<r?r=c:c>o&&(o=c)}return[[e,r],[n,o]]}(this.children.table.state.filteredRows)},e}(oe);var ji=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pi=function(t){function e(e){var n=t.call(this)||this,r={version:e};return n.assignInitialState(r),n.addChild("filter",new Va),n.addChild("table",new Ni),n.addChild("map",new yi({clusterGauges:!1,getGaugeBounds:n.getGaugeBounds.bind(n)})),n.addChild("tabsPanel",new ue("table")),n}return ji(e,t),e.prototype.onChanges=function(t){if((0,Xt.has)(t,"filter")){var e=this.children,n=e.filter,r=e.table,o=e.map,a=n.state;this.batch((function(){r.setFilter(a),o.setFilter(a)}))}},e.prototype.setData=function(t){var e=this;this.batch((function(){var n=e.children,r=n.filter,o=n.table,a=n.map;r.setData(t),o.setData(t),a.setData(t)}))},e.prototype.getGaugeCount=function(){return this.children.table.getRowCount()},e.prototype.getGaugeBounds=function(){return this.children.table.getDataBounds()},e}(oe);const ki=Pi;var Ei=function(){return Ei=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ei.apply(this,arguments)};function Mi(t){var e=t.model;de(e,["filter"]);var n=e.getGaugeCount();return i("div",Ei({className:"rr-gauges-layout__gauge-count mb-3"},{children:1===n?"Showing 1 gauge":"Showing ".concat(n," gauges")}),void 0)}const Ai=function(t){var e=t.model,n=e.children,r=n.tabsPanel,o=n.filter,a=n.map,c=n.table;de(r);var s=r.state.mode,u=(0,l.useCallback)((function(t){r.setMode(t)}),[r]),f={table:(0,l.useCallback)((function(){return i("div",Ei({className:"rr-gauges-layout__table"},{children:[i(Mi,{model:e},void 0),i(_i,{model:c},void 0)]}),void 0)}),[e,c]),map:(0,l.useCallback)((function(){return i("div",Ei({className:"rr-gauges-layout__map"},{children:[i(Mi,{model:e},void 0),i(fi,{model:a},void 0)]}),void 0)}),[e,a])};return i("div",{children:[i("div",Ei({className:"rr-gauges-layout__tabs-header mb-3"},{children:i(ye,{mode:s,tabs:[{mode:"table",title:"Table"},{mode:"map",title:"Map"}],handleTabChange:u},void 0)}),void 0),i("div",Ei({className:"rr-gauges-layout mx-3"},{children:[i("div",Ei({className:"rr-gauges-layout__filter me-lg-3 mb-3 mb-lg-0"},{children:i(Ao,{model:o},void 0)}),void 0),i("div",Ei({className:"rr-gauges-layout__tabs-body"},{children:i(_e,{mode:s,renderChildren:f,persist:!0},void 0)}),void 0)]}),void 0)]},void 0)};var Fi=function(){return Fi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Fi.apply(this,arguments)};const Ti=function(t){var e=t.model,n=Jt(),o=e.children.versions.getChild(n).children,a=o.fetcher,l=o.gauges;return pe(Ft(n,"metadata.json"),a),i(r.Fragment,{children:[i("h1",Fi({className:"mb-5"},{children:"Gauges"}),void 0),i(Ze,Fi({model:a},{children:function(){return i(Ai,{model:l},void 0)}}),void 0)]},void 0)};var Li=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ii=function(t){function e(e){var n=t.call(this)||this;return n.addChild("fetcher",new ce),n.addChild("locations",new Xn(e)),n.addChild("gauges",new ki(e)),n}return Li(e,t),e.prototype.onChanges=function(t){if((0,Xt.has)(t,"fetcher.data")){var e=this.children,n=e.fetcher,r=e.locations,o=e.gauges,a=n.state.data;if(null!==a){var i=function(t){var e=t.version,n=t.locations,r=t.gauges,o=t.counties,a=t.countries,i=o.map((function(t){var e=t.name,n=t.countryIndex;return{name:e,country:a[n].name}})),l=r.map((function(t){var r=t.locationIndex,a=t.lon,i=t.lat,l=t.nameSuffix,c=t.elevation,s=t.startYear,u=t.endYear,f=t.countiesIndexes,d=n[r].name,p="".concat(d).concat(l),h=f.map((function(t){return o[t].name}));return{name:p,location:d,url:"/".concat(e,"/locations/").concat(d,"/").concat(p),lon:a,lat:i,elevation:c,startYear:s,endYear:u,duration:u-s+1,counties:h,distance:null}}));return{version:e,locations:n,gauges:l,counties:i,countries:a}}(a);r.setData(i),o.setData(i)}}},e}(oe);const Ri=Ii;var Di=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vi=function(t){function e(e){var n=t.call(this)||this;n.addChild("versions",new ae);var r=n.children.versions;return e.forEach((function(t,e){r.addChild("".concat(e),new Ri(t),t)})),n}return Di(e,t),e}(oe),Gi=function(){return Gi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Gi.apply(this,arguments)},Bi=new Vi(Ct.versions);function Ui(){var t=X(),e=Jt();return i("div",{children:[i("header",{children:i(zt,{currentVersion:e,versions:Ct.versions},void 0)},void 0),i("main",Gi({className:"mt-3 pb-5"},{children:i("div",Gi({className:"container"},{children:[i(St,{pathname:t.pathname},void 0),i($,{},void 0)]}),void 0)}),void 0)]},void 0)}function Hi(t){return Ct.versions.indexOf(t.version)>-1}function Wi(t){return e=t.location,/^[A-Z-]+$/.test(e);var e}function zi(t){return e=t.gauge,/^[A-Z0-9-]+\d*$/.test(e);var e}var Ki=document.getElementById("app");null!==Ki&&(0,r.render)(i((function(){return i(_t,{children:i(q,{children:[i(Y,Gi({path:"/",element:i(Ui,{},void 0)},{children:[i(Y,{index:!0,element:i(Je,{},void 0)},void 0),i(Y,Gi({path:":version",element:i(ze,{validator:Hi},void 0)},{children:[i(Y,{index:!0,element:i(Je,{},void 0)},void 0),i(Y,Gi({path:"locations"},{children:[i(Y,{index:!0,element:i(Kn,{model:Bi},void 0)},void 0),i(Y,Gi({path:":location",element:i(ze,{validator:Wi},void 0)},{children:[i(Y,{index:!0,element:i(vn,{},void 0)},void 0),i(Y,Gi({path:":gauge",element:i(ze,{validator:zi},void 0)},{children:i(Y,{index:!0,element:i(Vr,{},void 0)},void 0)}),void 0)]}),void 0)]}),void 0),i(Y,Gi({path:"gauges"},{children:i(Y,{index:!0,element:i(Ti,{model:Bi},void 0)},void 0)}),void 0)]}),void 0),i(Y,{path:"not-found",element:i(Yt,{},void 0)},void 0)]}),void 0),i(Y,{path:"*",element:i(K,{to:"not-found",replace:!0},void 0)},void 0)]},void 0)},void 0)}),{},void 0),Ki)})();